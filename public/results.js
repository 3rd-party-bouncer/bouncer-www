!function(){"use strict";function e(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function t(e){return"string"!=typeof e&&(e=e.toString()),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function r(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),r(t)}function o(e){var t=new FileReader;return t.readAsText(e),r(t)}function a(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},f.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return o(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return d.indexOf(t)>-1?t:e}function c(e,t){if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new n(t.headers),this.method=l(t.method||"GET"),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function u(e){var t=new n,i=e.getAllResponseHeaders().trim().split("\n");return i.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();t.append(i,r)}),t}function p(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||""}if(!self.fetch){n.prototype.append=function(n,i){n=e(n),i=t(i);var r=this.map[n];r||(r=[],this.map[n]=r),r.push(i)},n.prototype["delete"]=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(n,i){this.map[e(n)]=[t(i)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)};var f={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(c.prototype),a.call(p.prototype),self.Headers=n,self.Request=c,self.Response=p,self.fetch=function(e,t){var n;return n=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t),new Promise(function(e,t){function i(){return"responseURL"in r?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):void 0}var r=new XMLHttpRequest;r.onload=function(){var n=1223===r.status?204:r.status;if(100>n||n>599)return void t(new TypeError("Network request failed"));var s={status:n,statusText:r.statusText,headers:u(r),url:i()},o="response"in r?r.response:r.responseText;e(new p(o,s))},r.onerror=function(){t(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials&&(r.withCredentials=!0),"responseType"in r&&f.blob&&(r.responseType="blob"),n.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}(),function(){var e={};!function(){"use strict";function t(e,n,i){var r=function(){};r.prototype=e.prototype;var s=new r,o=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;i=i||{};for(var a in i){var l=i[a],c=s[a];s[a]="function"==typeof c&&"function"==typeof l&&o.test(l)?function(e,t){return function(){var n=this.parent;this.parent=t;var i=e.apply(this,arguments);return this.parent=n,i}}(l,c):l}s.typename=n;var h=function(){s.init&&s.init.apply(this,arguments)};return h.prototype=s,h.prototype.constructor=h,h.extend=function(e,n){return"object"==typeof e&&(n=e,e="anonymous"),t(h,e,n)},h}e.object=t(Object,"Object",{})}(),function(){"use strict";var t=Array.prototype,n=Object.prototype,i={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},r=/[&"'<>]/g,s=function(e){return i[e]},o=e.lib={};o.withPrettyErrors=function(e,t,n){try{return n()}catch(i){if(i.Update||(i=new o.TemplateError(i)),i.Update(e),!t){var r=i;i=new Error(r.message),i.name=r.name}throw i}},o.TemplateError=function(e,t,n){var i=this;return e instanceof Error?(i=e,e=e.name+": "+e.message):Error.captureStackTrace&&Error.captureStackTrace(i),i.name="Template render error",i.message=e,i.lineno=t,i.colno=n,i.firstUpdate=!0,i.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},i},o.TemplateError.prototype=Error.prototype,o.escape=function(e){return e.replace(r,s)},o.isFunction=function(e){return"[object Function]"===n.toString.call(e)},o.isArray=Array.isArray||function(e){return"[object Array]"===n.toString.call(e)},o.isString=function(e){return"[object String]"===n.toString.call(e)},o.isObject=function(e){return"[object Object]"===n.toString.call(e)},o.groupBy=function(e,t){for(var n={},i=o.isFunction(t)?t:function(e){return e[t]},r=0;r<e.length;r++){var s=e[r],a=i(s,r);(n[a]||(n[a]=[])).push(s)}return n},o.toArray=function(e){return Array.prototype.slice.call(e)},o.without=function(e){var t=[];if(!e)return t;for(var n=-1,i=e.length,r=o.toArray(arguments).slice(1);++n<i;)-1===o.indexOf(r,e[n])&&t.push(e[n]);return t},o.extend=function(e,t){for(var n in t)e[n]=t[n];return e},o.repeat=function(e,t){for(var n="",i=0;t>i;i++)n+=e;return n},o.each=function(e,n,i){if(null!=e)if(t.each&&e.each===t.each)e.forEach(n,i);else if(e.length===+e.length)for(var r=0,s=e.length;s>r;r++)n.call(i,e[r],r,e)},o.map=function(e,n){var i=[];if(null==e)return i;if(t.map&&e.map===t.map)return e.map(n);for(var r=0;r<e.length;r++)i[i.length]=n(e[r],r);return e.length===+e.length&&(i.length=e.length),i},o.asyncIter=function(e,t,n){function i(){r++,r<e.length?t(e[r],r,i,n):n()}var r=-1;i()},o.asyncFor=function(e,t,n){function i(){a++;var o=r[a];s>a?t(o,e[o],a,s,i):n()}var r=o.keys(e),s=r.length,a=-1;i()},o.indexOf=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){var i=this.length>>>0;for(n=+n||0,Math.abs(n)===1/0&&(n=0),0>n&&(n+=i,0>n&&(n=0));i>n;n++)if(e[n]===t)return n;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),o.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}(),function(){"use strict";function t(e,t,n){e instanceof t&&n.push(e),e instanceof o&&e.findAll(t,n)}function n(e,t){function s(e,t,n){for(var r=e.split("\n"),s=0;s<r.length;s++){if(r[s]&&(n&&s>0||!n))for(var o=0;t>o;o++)i.print(" ");s===r.length-1?i.print(r[s]):i.puts(r[s])}}if(t=t||0,s(e.typename+": ",t),e instanceof l)s("\n"),r.each(e.children,function(e){n(e,t+2)});else if(e instanceof ne)s(e.extName+"."+e.prop),s("\n"),e.args&&n(e.args,t+2),e.contentArgs&&r.each(e.contentArgs,function(e){n(e,t+2)});else{var a=null,c=null;if(e.iterFields(function(e,t){e instanceof o?(a=a||{},a[t]=e):(c=c||{},c[t]=e)}),c?s(i.inspect(c,!0,null)+"\n",null,!0):s("\n"),a)for(var h in a)n(a[h],t+2)}}var i=e.util,r=e.lib,s=e.object,o=s.extend("Node",{init:function(e,t){this.lineno=e,this.colno=t;for(var n=this.fields,i=0,r=n.length;r>i;i++){var s=n[i],o=arguments[i+2];void 0===o&&(o=null),this[s]=o}},findAll:function(e,n){if(n=n||[],this instanceof l)for(var i=this.children,r=0,s=i.length;s>r;r++)t(i[r],e,n);else for(var o=this.fields,r=0,s=o.length;s>r;r++)t(this[o[r]],e,n);return n},iterFields:function(e){r.each(this.fields,function(t){e(this[t],t)},this)}}),a=o.extend("Value",{fields:["value"]}),l=o.extend("NodeList",{fields:["children"],init:function(e,t,n){this.parent(e,t,n||[])},addChild:function(e){this.children.push(e)}}),c=l.extend("Root"),h=a.extend("Literal"),u=a.extend("Symbol"),p=l.extend("Group"),f=l.extend("Array"),d=o.extend("Pair",{fields:["key","value"]}),m=l.extend("Dict"),v=o.extend("LookupVal",{fields:["target","val"]}),g=o.extend("If",{fields:["cond","body","else_"]}),y=g.extend("IfAsync"),x=o.extend("InlineIf",{fields:["cond","body","else_"]}),b=o.extend("For",{fields:["arr","name","body","else_"]}),w=b.extend("AsyncEach"),E=b.extend("AsyncAll"),k=o.extend("Macro",{fields:["name","args","body"]}),A=k.extend("Caller"),T=o.extend("Import",{fields:["template","target","withContext"]}),_=o.extend("FromImport",{fields:["template","names","withContext"],init:function(e,t,n,i,r){this.parent(e,t,n,i||new l,r)}}),O=o.extend("FunCall",{fields:["name","args"]}),L=O.extend("Filter"),S=L.extend("FilterAsync",{fields:["name","args","symbol"]}),N=m.extend("KeywordArgs"),C=o.extend("Block",{fields:["name","body"]}),B=o.extend("Super",{fields:["blockName","symbol"]}),I=o.extend("TemplateRef",{fields:["template"]}),M=I.extend("Extends"),P=I.extend("Include"),R=o.extend("Set",{fields:["targets","value"]}),F=l.extend("Output"),K=h.extend("TemplateData"),j=o.extend("UnaryOp",{fields:["target"]}),D=o.extend("BinOp",{fields:["left","right"]}),U=D.extend("In"),V=D.extend("Or"),z=D.extend("And"),G=j.extend("Not"),H=D.extend("Add"),W=D.extend("Sub"),Y=D.extend("Mul"),X=D.extend("Div"),q=D.extend("FloorDiv"),$=D.extend("Mod"),Q=D.extend("Pow"),Z=j.extend("Neg"),J=j.extend("Pos"),ee=o.extend("Compare",{fields:["expr","ops"]}),te=o.extend("CompareOperand",{fields:["expr","type"]}),ne=(o.extend("CustomTag",{init:function(e,t,n){this.lineno=e,this.colno=t,this.name=n}}),o.extend("CallExtension",{fields:["extName","prop","args","contentArgs"],init:function(e,t,n,i){this.extName=e._name||e,this.prop=t,this.args=n||new l,this.contentArgs=i||[],this.autoescape=e.autoescape}})),ie=ne.extend("CallExtensionAsync");e.nodes={Node:o,Root:c,NodeList:l,Value:a,Literal:h,Symbol:u,Group:p,Array:f,Pair:d,Dict:m,Output:F,TemplateData:K,If:g,IfAsync:y,InlineIf:x,For:b,AsyncEach:w,AsyncAll:E,Macro:k,Caller:A,Import:T,FromImport:_,FunCall:O,Filter:L,FilterAsync:S,KeywordArgs:N,Block:C,Super:B,Extends:M,Include:P,Set:R,LookupVal:v,BinOp:D,In:U,Or:V,And:z,Not:G,Add:H,Sub:W,Mul:Y,Div:X,FloorDiv:q,Mod:$,Pow:Q,Neg:Z,Pos:J,Compare:ee,CompareOperand:te,CallExtension:ne,CallExtensionAsync:ie,printNodes:n}}(),function(){"use strict";function t(e,t,n){return function(){var s,o=r(arguments),a=i(arguments);if(o>e.length){s=Array.prototype.slice.call(arguments,0,e.length);for(var l=Array.prototype.slice.call(arguments,s.length,o),c=0;c<l.length;c++)c<t.length&&(a[t[c]]=l[c]);s.push(a)}else if(o<e.length){s=Array.prototype.slice.call(arguments,0,o);for(var c=o;c<e.length;c++){var h=e[c];s.push(a[h]),delete a[h]}s.push(a)}else s=arguments;return n.apply(this,s)}}function n(e){return e.__keywords=!0,e}function i(e){var t=e.length;if(t){var n=e[t-1];if(n&&n.hasOwnProperty("__keywords"))return n}return{}}function r(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return n&&n.hasOwnProperty("__keywords")?t-1:t}function s(e){return"string"!=typeof e?e:void(this.val=e)}function o(e,t){return e instanceof s?new s(t):t.toString()}function a(e){var t=typeof e;return"string"===t?new s(e):"function"!==t?e:function(){var t=e.apply(this,arguments);return"string"==typeof t?new s(t):t}}function l(e,t){return e=void 0!==e&&null!==e?e:"",t&&"string"==typeof e&&(e=m.escape(e)),e}function c(e,t){return e=e||{},"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function h(e,t,n){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(this,n)}function u(e,t,n){var i=t.lookup(n);return void 0!==i&&null!==i?i:e.lookup(n)}function p(e,t,n){return e.lineno?e:new m.TemplateError(e,t,n)}function f(e,t,n,i){if(m.isArray(e)){var r=e.length;m.asyncIter(e,function(e,i,s){switch(t){case 1:n(e,i,r,s);break;case 2:n(e[0],e[1],i,r,s);break;case 3:n(e[0],e[1],e[2],i,r,s);break;default:e.push(i,s),n.apply(this,e)}},i)}else m.asyncFor(e,function(e,t,i,r,s){n(e,t,i,r,s)},i)}function d(e,t,n,i){function r(e,t){a++,o[e]=t,a===s&&i(null,o.join(""))}var s,o,a=0;if(m.isArray(e))if(s=e.length,o=new Array(s),0===s)i(null,"");else for(var l=0;l<e.length;l++){var c=e[l];switch(t){case 1:n(c,l,s,r);break;case 2:n(c[0],c[1],l,s,r);break;case 3:n(c[0],c[1],c[2],l,s,r);break;default:c.push(l,r),n.apply(this,c)}}else{var h=m.keys(e);if(s=h.length,o=new Array(s),0===s)i(null,"");else for(var l=0;l<h.length;l++){var u=h[l];n(u,e[u],l,s,r)}}}var m=e.lib,v=e.object,g=v.extend({init:function(e){this.variables={},this.parent=e},set:function(e,t,n){var i=e.split("."),r=this.variables,s=this;if(n){if(s=this.resolve(i[0]))return void s.set(e,t);s=this}for(var o=0;o<i.length-1;o++){var a=i[o];r[a]||(r[a]={}),r=r[a]}r[i[i.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t&&null!==t?t:null},lookup:function(e){var t=this.parent,n=this.variables[e];return void 0!==n&&null!==n?n:t&&t.lookup(e)},resolve:function(e){var t=this.parent,n=this.variables[e];return void 0!==n&&null!==n?this:t&&t.resolve(e)},push:function(){return new g(this)},pop:function(){return this.parent}});s.prototype=Object.create(String.prototype),s.prototype.valueOf=function(){return this.val},s.prototype.toString=function(){return this.val},e.runtime={Frame:g,makeMacro:t,makeKeywordArgs:n,numArgs:r,suppressValue:l,memberLookup:c,contextOrFrameLookup:u,callWrap:h,handleError:p,isArray:m.isArray,keys:m.keys,SafeString:s,copySafeness:o,markSafe:a,asyncEach:f,asyncAll:d}}(),function(){"use strict";function t(e,t,n,i){return{type:e,value:t,lineno:n,colno:i}}function n(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1,t=t||{};var n=t.tags||{};this.tags={BLOCK_START:n.blockStart||a,BLOCK_END:n.blockEnd||l,VARIABLE_START:n.variableStart||c,VARIABLE_END:n.variableEnd||h,COMMENT_START:n.commentStart||u,COMMENT_END:n.commentEnd||p},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var i=e.lib,r=" \n	\rÂ ",s="()[]{}%*-+/#,:|.<>=!",o="0123456789",a="{%",l="%}",c="{{",h="}}",u="{#",p="#}",f="string",d="whitespace",m="data",v="block-start",g="block-end",y="variable-start",x="variable-end",b="comment",w="left-paren",E="right-paren",k="left-bracket",A="right-bracket",T="left-curly",_="right-curly",O="operator",L="comma",S="colon",N="pipe",C="int",B="float",I="boolean",M="symbol",P="special",R="regex";n.prototype.nextToken=function(){var e,n=this.lineno,a=this.colno;if(this.in_code){var l=this.current();if(this.is_finished())return null;if('"'===l||"'"===l)return t(f,this.parseString(l),n,a);if(e=this._extract(r))return t(d,e,n,a);if((e=this._extractString(this.tags.BLOCK_END))||(e=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(l=this.current(),"\n"===l&&this.forward()),t(g,e,n,a);if(e=this._extractString(this.tags.VARIABLE_END))return this.in_code=!1,t(x,e,n,a);if("r"===l&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var c="";!this.is_finished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}c+=this.current(),this.forward()}for(var h=["g","i","m","y"],u="";!this.is_finished();){var p=-1!==h.indexOf(this.current());if(!p)break;u+=this.current(),this.forward()}return t(R,{body:c,flags:u},n,a)}if(-1!==s.indexOf(l)){this.forward();var P,F=["==","!=","<=",">=","//","**"],K=l+this.current();switch(-1!==i.indexOf(F,K)&&(this.forward(),l=K),l){case"(":P=w;break;case")":P=E;break;case"[":P=k;break;case"]":P=A;break;case"{":P=T;break;case"}":P=_;break;case",":P=L;break;case":":P=S;break;case"|":P=N;break;default:P=O}return t(P,l,n,a)}if(e=this._extractUntil(r+s),e.match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var j=this._extract(o);return t(B,e+"."+j,n,a)}return t(C,e,n,a)}if(e.match(/^(true|false)$/))return t(I,e,n,a);if(e)return t(M,e,n,a);throw new Error("Unexpected value while parsing: "+e)}var D=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.is_finished())return null;if((e=this._extractString(this.tags.BLOCK_START+"-"))||(e=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,t(v,e,n,a);if(e=this._extractString(this.tags.VARIABLE_START))return this.in_code=!0,t(y,e,n,a);e="";var U,V=!1;for(this._matches(this.tags.COMMENT_START)&&(V=!0,e=this._extractString(this.tags.COMMENT_START));null!==(U=this._extractUntil(D));){if(e+=U,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!V){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var z=e.slice(-this.colno);if(/^\s+$/.test(z)&&(e=e.slice(0,-this.colno),!e.length))return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!V)throw new Error("unexpected end of comment");e+=this._extractString(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===U&&V)throw new Error("expected end of comment, got end of file");return t(V?b:m,e,n,a)},n.prototype.parseString=function(e){this.forward();for(var t=(this.lineno,this.colno,"");!this.is_finished()&&this.current()!==e;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":t+="\n";break;case"t":t+="	";break;case"r":t+="\r";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},n.prototype._matches=function(e){if(this.index+e.length>this.len)return null;var t=this.str.slice(this.index,this.index+e.length);return t===e},n.prototype._extractString=function(e){return this._matches(e)?(this.index+=e.length,e):null},n.prototype._extractUntil=function(e){return this._extractMatching(!0,e||"")},n.prototype._extract=function(e){return this._extractMatching(!1,e)},n.prototype._extractMatching=function(e,t){if(this.is_finished())return null;var n=t.indexOf(this.current());if(e&&-1===n||!e&&-1!==n){var i=this.current();this.forward();for(var r=t.indexOf(this.current());(e&&-1===r||!e&&-1!==r)&&!this.is_finished();)i+=this.current(),this.forward(),r=t.indexOf(this.current());return i}return""},n.prototype.is_finished=function(){return this.index>=this.len},n.prototype.forwardN=function(e){for(var t=0;e>t;t++)this.forward()},n.prototype.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},n.prototype.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var e=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===e?this.index:this.index-e}else this.colno--},n.prototype.current=function(){return this.is_finished()?"":this.str.charAt(this.index)},n.prototype.previous=function(){return this.str.charAt(this.index-1)},e.lexer={lex:function(e,t){return new n(e,t)},TOKEN_STRING:f,TOKEN_WHITESPACE:d,TOKEN_DATA:m,TOKEN_BLOCK_START:v,TOKEN_BLOCK_END:g,TOKEN_VARIABLE_START:y,TOKEN_VARIABLE_END:x,TOKEN_COMMENT:b,TOKEN_LEFT_PAREN:w,TOKEN_RIGHT_PAREN:E,TOKEN_LEFT_BRACKET:k,TOKEN_RIGHT_BRACKET:A,TOKEN_LEFT_CURLY:T,TOKEN_RIGHT_CURLY:_,TOKEN_OPERATOR:O,TOKEN_COMMA:L,TOKEN_COLON:S,TOKEN_PIPE:N,TOKEN_INT:C,TOKEN_FLOAT:B,TOKEN_BOOLEAN:I,TOKEN_SYMBOL:M,TOKEN_SPECIAL:P,TOKEN_REGEX:R}}(),function(){"use strict";var t=e.lexer,n=e.nodes,i=e.object,r=e.lib,s=i.extend({init:function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},nextToken:function(e){var n;if(this.peeked){if(e||this.peeked.type!==t.TOKEN_WHITESPACE)return n=this.peeked,this.peeked=null,n;this.peeked=null}if(n=this.tokens.nextToken(),!e)for(;n&&n.type===t.TOKEN_WHITESPACE;)n=this.tokens.nextToken();return n},peekToken:function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},pushToken:function(e){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=e},fail:function(e,t,n){if((void 0===t||void 0===n)&&this.peekToken()){var i=this.peekToken();t=i.lineno,n=i.colno}throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new r.TemplateError(e,t,n)},skip:function(e){var t=this.nextToken();return t&&t.type===e?!0:(this.pushToken(t),!1)},expect:function(e){var t=this.nextToken();return t.type!==e&&this.fail("expected "+e+", got "+t.type,t.lineno,t.colno),t},skipValue:function(e,t){var n=this.nextToken();return n&&n.type===e&&n.value===t?!0:(this.pushToken(n),!1)},skipWhitespace:function(){return this.skip(t.TOKEN_WHITESPACE)},skipSymbol:function(e){return this.skipValue(t.TOKEN_SYMBOL,e)},advanceAfterBlockEnd:function(e){if(!e){var n=this.peekToken();n||this.fail("unexpected end of file"),n.type!==t.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value}var n=this.nextToken();n&&n.type===t.TOKEN_BLOCK_END?"-"===n.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement")},advanceAfterVariableEnd:function(){this.skip(t.TOKEN_VARIABLE_END)||this.fail("expected variable end")},parseFor:function(){var e,i,r=this.peekToken();this.skipSymbol("for")?(e=new n.For(r.lineno,r.colno),i="endfor"):this.skipSymbol("asyncEach")?(e=new n.AsyncEach(r.lineno,r.colno),i="endeach"):this.skipSymbol("asyncAll")?(e=new n.AsyncAll(r.lineno,r.colno),i="endall"):this.fail("parseFor: expected for{Async}",r.lineno,r.colno),e.name=this.parsePrimary(),e.name instanceof n.Symbol||this.fail("parseFor: variable name expected for loop");var s=this.peekToken().type;if(s===t.TOKEN_COMMA){var o=e.name;for(e.name=new n.Array(o.lineno,o.colno),e.name.addChild(o);this.skip(t.TOKEN_COMMA);){var a=this.parsePrimary();e.name.addChild(a)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',r.lineno,r.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(r.value),e.body=this.parseUntilBlocks(i,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),e.else_=this.parseUntilBlocks(i)),this.advanceAfterBlockEnd(),e},parseMacro:function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var t=this.parsePrimary(!0),i=this.parseSignature(),r=new n.Macro(e.lineno,e.colno,t,i);return this.advanceAfterBlockEnd(e.value),r.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),r},parseCall:function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var t=this.parseSignature(!0)||new n.NodeList,i=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var r=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var s=new n.Symbol(e.lineno,e.colno,"caller"),o=new n.Caller(e.lineno,e.colno,s,t,r),a=i.args.children;a[a.length-1]instanceof n.KeywordArgs||a.push(new n.KeywordArgs);var l=a[a.length-1];return l.addChild(new n.Pair(e.lineno,e.colno,s,o)),new n.Output(e.lineno,e.colno,[i])},parseWithContext:function(){var e=this.peekToken(),t=null;return this.skipSymbol("with")?t=!0:this.skipSymbol("without")&&(t=!1),null!==t&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),t},parseImport:function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var i=this.parsePrimary(),r=this.parseWithContext(),s=new n.Import(e.lineno,e.colno,t,i,r);return this.advanceAfterBlockEnd(e.value),s},parseFrom:function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var i=this.parsePrimary();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var r,s=new n.NodeList;;){var o=this.peekToken();if(o.type===t.TOKEN_BLOCK_END){s.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),"-"===o.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}s.children.length>0&&!this.skip(t.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var a=this.parsePrimary();if("_"===a.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",a.lineno,a.colno),this.skipSymbol("as")){var l=this.parsePrimary();s.addChild(new n.Pair(a.lineno,a.colno,a,l))}else s.addChild(a);r=this.parseWithContext()}return new n.FromImport(e.lineno,e.colno,i,s,r)},parseBlock:function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var t=new n.Block(e.lineno,e.colno);return t.name=this.parsePrimary(),t.name instanceof n.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("endblock"),this.peekToken()||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(),t},parseTemplateRef:function(e,t){var n=this.peekToken();this.skipSymbol(e)||this.fail("parseTemplateRef: expected "+e);var i=new t(n.lineno,n.colno);return i.template=this.parseExpression(),this.advanceAfterBlockEnd(n.value),i},parseExtends:function(){return this.parseTemplateRef("extends",n.Extends)},parseInclude:function(){return this.parseTemplateRef("include",n.Include)},parseIf:function(){var e,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")?e=new n.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?e=new n.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if or elif",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("elif","else","endif");var i=this.peekToken();switch(i&&i.value){case"elif":e.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected endif, else, or endif, got end of file")}return e},parseSet:function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var i,r=new n.Set(e.lineno,e.colno,[]);(i=this.parsePrimary())&&(r.targets.push(i),this.skip(t.TOKEN_COMMA)););return this.skipValue(t.TOKEN_OPERATOR,"=")||this.fail("parseSet: expected = in set tag",e.lineno,e.colno),r.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value),r},parseStatement:function(){var e,i=this.peekToken();if(i.type!==t.TOKEN_SYMBOL&&this.fail("tag name expected",i.lineno,i.colno),this.breakOnBlocks&&-1!==r.indexOf(this.breakOnBlocks,i.value))return null;switch(i.value){case"raw":return this.parseRaw();case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();default:if(this.extensions.length)for(var s=0;s<this.extensions.length;s++){var o=this.extensions[s];if(-1!==r.indexOf(o.tags||[],i.value))return o.parse(this,n,t)}this.fail("unknown block tag: "+i.value,i.lineno,i.colno)}return e},parseRaw:function(){this.advanceAfterBlockEnd();for(var e="",i=this.peekToken();;){var r=this.nextToken(!0);if(r||this.fail("expected endraw, got end of file"),r.type===t.TOKEN_BLOCK_START){var s=null,o=this.nextToken(!0);if(o.type===t.TOKEN_WHITESPACE&&(s=o,o=this.nextToken()),o.type===t.TOKEN_SYMBOL&&"endraw"===o.value){this.advanceAfterBlockEnd(o.value);break}e+=r.value,s&&(e+=s.value),e+=o.value}else e+=r.type===t.TOKEN_STRING?'"'+r.value+'"':r.value}var a=new n.Output(i.lineno,i.colno,[new n.TemplateData(i.lineno,i.colno,e)]);return a},parsePostfix:function(e){for(var i=this.peekToken();i;){if(i.type===t.TOKEN_LEFT_PAREN)e=new n.FunCall(i.lineno,i.colno,e,this.parseSignature());else if(i.type===t.TOKEN_LEFT_BRACKET){var r=this.parseAggregate();r.children.length>1&&this.fail("invalid index"),e=new n.LookupVal(i.lineno,i.colno,e,r.children[0])}else{if(i.type!==t.TOKEN_OPERATOR||"."!==i.value)break;this.nextToken();var s=this.nextToken();s.type!==t.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+s.value,s.lineno,s.colno);var r=new n.Literal(s.lineno,s.colno,s.value);e=new n.LookupVal(i.lineno,i.colno,e,r)}i=this.peekToken()}return e},parseExpression:function(){var e=this.parseInlineIf();return e},parseInlineIf:function(){var e=this.parseOr();if(this.skipSymbol("if")){var t=this.parseOr(),i=e;e=new n.InlineIf(e.lineno,e.colno),e.body=i,e.cond=t,e.else_=this.skipSymbol("else")?this.parseOr():null}return e},parseOr:function(){for(var e=this.parseAnd();this.skipSymbol("or");){var t=this.parseAnd();e=new n.Or(e.lineno,e.colno,e,t)}return e},parseAnd:function(){for(var e=this.parseNot();this.skipSymbol("and");){var t=this.parseNot();e=new n.And(e.lineno,e.colno,e,t)}return e},parseNot:function(){var e=this.peekToken();return this.skipSymbol("not")?new n.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},parseIn:function(){for(var e=this.parseCompare();;){var i=this.nextToken();if(!i)break;var r=i.type===t.TOKEN_SYMBOL&&"not"===i.value;if(r||this.pushToken(i),!this.skipSymbol("in")){r&&this.pushToken(i);break}var s=this.parseCompare();e=new n.In(e.lineno,e.colno,e,s),r&&(e=new n.Not(e.lineno,e.colno,e))}return e},parseCompare:function(){for(var e=["==","!=","<",">","<=",">="],t=this.parseAdd(),i=[];;){var s=this.nextToken();if(!s)break;if(-1===r.indexOf(e,s.value)){this.pushToken(s);break}i.push(new n.CompareOperand(s.lineno,s.colno,this.parseAdd(),s.value))}return i.length?new n.Compare(i[0].lineno,i[0].colno,t,i):t},parseAdd:function(){for(var e=this.parseSub();this.skipValue(t.TOKEN_OPERATOR,"+");){var i=this.parseSub();e=new n.Add(e.lineno,e.colno,e,i)}return e},parseSub:function(){for(var e=this.parseMul();this.skipValue(t.TOKEN_OPERATOR,"-");){var i=this.parseMul();e=new n.Sub(e.lineno,e.colno,e,i)}return e},parseMul:function(){for(var e=this.parseDiv();this.skipValue(t.TOKEN_OPERATOR,"*");){var i=this.parseDiv();e=new n.Mul(e.lineno,e.colno,e,i)}return e},parseDiv:function(){for(var e=this.parseFloorDiv();this.skipValue(t.TOKEN_OPERATOR,"/");){var i=this.parseFloorDiv();e=new n.Div(e.lineno,e.colno,e,i)}return e},parseFloorDiv:function(){for(var e=this.parseMod();this.skipValue(t.TOKEN_OPERATOR,"//");){var i=this.parseMod();e=new n.FloorDiv(e.lineno,e.colno,e,i)}return e},parseMod:function(){for(var e=this.parsePow();this.skipValue(t.TOKEN_OPERATOR,"%");){
var i=this.parsePow();e=new n.Mod(e.lineno,e.colno,e,i)}return e},parsePow:function(){for(var e=this.parseUnary();this.skipValue(t.TOKEN_OPERATOR,"**");){var i=this.parseUnary();e=new n.Pow(e.lineno,e.colno,e,i)}return e},parseUnary:function(e){var i,r=this.peekToken();return i=this.skipValue(t.TOKEN_OPERATOR,"-")?new n.Neg(r.lineno,r.colno,this.parseUnary(!0)):this.skipValue(t.TOKEN_OPERATOR,"+")?new n.Pos(r.lineno,r.colno,this.parseUnary(!0)):this.parsePrimary(),e||(i=this.parseFilter(i)),i},parsePrimary:function(e){var i=this.nextToken(),r=null,s=null;return i?i.type===t.TOKEN_STRING?r=i.value:i.type===t.TOKEN_INT?r=parseInt(i.value,10):i.type===t.TOKEN_FLOAT?r=parseFloat(i.value):i.type===t.TOKEN_BOOLEAN?"true"===i.value?r=!0:"false"===i.value?r=!1:this.fail("invalid boolean: "+i.value,i.lineno,i.colno):i.type===t.TOKEN_REGEX&&(r=new RegExp(i.value.body,i.value.flags)):this.fail("expected expression, got end of file"),null!==r?s=new n.Literal(i.lineno,i.colno,r):i.type===t.TOKEN_SYMBOL?(s=new n.Symbol(i.lineno,i.colno,i.value),e||(s=this.parsePostfix(s))):(this.pushToken(i),s=this.parseAggregate()),s?s:void this.fail("unexpected token: "+i.value,i.lineno,i.colno)},parseFilter:function(e){for(;this.skip(t.TOKEN_PIPE);){for(var i=this.expect(t.TOKEN_SYMBOL),r=i.value;this.skipValue(t.TOKEN_OPERATOR,".");)r+="."+this.expect(t.TOKEN_SYMBOL).value;if(e=new n.Filter(i.lineno,i.colno,new n.Symbol(i.lineno,i.colno,r),new n.NodeList(i.lineno,i.colno,[e])),this.peekToken().type===t.TOKEN_LEFT_PAREN){var s=this.parsePostfix(e);e.args.children=e.args.children.concat(s.args.children)}}return e},parseAggregate:function(){var e,i=this.nextToken();switch(i.type){case t.TOKEN_LEFT_PAREN:e=new n.Group(i.lineno,i.colno);break;case t.TOKEN_LEFT_BRACKET:e=new n.Array(i.lineno,i.colno);break;case t.TOKEN_LEFT_CURLY:e=new n.Dict(i.lineno,i.colno);break;default:return null}for(;;){var r=this.peekToken().type;if(r===t.TOKEN_RIGHT_PAREN||r===t.TOKEN_RIGHT_BRACKET||r===t.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(t.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",i.lineno,i.colno)),e instanceof n.Dict){var s=this.parsePrimary();this.skip(t.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",i.lineno,i.colno);var o=this.parseExpression();e.addChild(new n.Pair(s.lineno,s.colno,s,o))}else{var a=this.parseExpression();e.addChild(a)}}return e},parseSignature:function(e,i){var r=this.peekToken();if(!i&&r.type!==t.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",r.lineno,r.colno)}r.type===t.TOKEN_LEFT_PAREN&&(r=this.nextToken());for(var s=new n.NodeList(r.lineno,r.colno),o=new n.KeywordArgs(r.lineno,r.colno),a=!1;;){if(r=this.peekToken(),!i&&r.type===t.TOKEN_RIGHT_PAREN){this.nextToken();break}if(i&&r.type===t.TOKEN_BLOCK_END)break;if(a&&!this.skip(t.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",r.lineno,r.colno);else{var l=this.parseExpression();this.skipValue(t.TOKEN_OPERATOR,"=")?o.addChild(new n.Pair(l.lineno,l.colno,l,this.parseExpression())):s.addChild(l)}a=!0}return o.children.length&&s.addChild(o),s},parseUntilBlocks:function(){var e=this.breakOnBlocks;this.breakOnBlocks=r.toArray(arguments);var t=this.parse();return this.breakOnBlocks=e,t},parseNodes:function(){for(var e,i=[];e=this.nextToken();)if(e.type===t.TOKEN_DATA){var r=e.value,s=this.peekToken(),o=s&&s.value;this.dropLeadingWhitespace&&(r=r.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),s&&s.type===t.TOKEN_BLOCK_START&&"-"===o.charAt(o.length-1)&&(r=r.replace(/\s*$/,"")),i.push(new n.Output(e.lineno,e.colno,[new n.TemplateData(e.lineno,e.colno,r)]))}else if(e.type===t.TOKEN_BLOCK_START){var a=this.parseStatement();if(!a)break;i.push(a)}else if(e.type===t.TOKEN_VARIABLE_START){var l=this.parseExpression();this.advanceAfterVariableEnd(),i.push(new n.Output(e.lineno,e.colno,[l]))}else e.type!==t.TOKEN_COMMENT&&this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return i},parse:function(){return new n.NodeList(0,0,this.parseNodes())},parseAsRoot:function(){return new n.Root(0,0,this.parseNodes())}});e.parser={parse:function(e,n,i){var r=new s(t.lex(e,i));return void 0!==n&&(r.extensions=n),r.parseAsRoot()}}}(),function(){"use strict";function t(){return"hole_"+f++}function n(e,t){for(var n=null,i=0;i<e.length;i++){var r=t(e[i]);r!==e[i]&&(n||(n=e.slice()),n[i]=r)}return n||e}function i(e,t,r){if(!(e instanceof u.Node))return e;if(!r){var s=t(e);if(s&&s!==e)return s}if(e instanceof u.NodeList){var o=n(e.children,function(e){return i(e,t,r)});o!==e.children&&(e=new u[e.typename](e.lineno,e.colno,o))}else if(e instanceof u.CallExtension){var a=i(e.args,t,r),l=n(e.contentArgs,function(e){return i(e,t,r)});(a!==e.args||l!==e.contentArgs)&&(e=new u[e.typename](e.extName,e.prop,a,l))}else{var c=e.fields.map(function(t){return e[t]}),h=n(c,function(e){return i(e,t,r)});h!==c&&(e=new u[e.typename](e.lineno,e.colno),h.forEach(function(t,n){e[e.fields[n]]=t}))}return r?t(e)||e:e}function r(e,t){return i(e,t,!0)}function s(e,n,i){var s=[],o=r(i?e[i]:e,function(e){if(e instanceof u.Block)return e;if(e instanceof u.Filter&&-1!==p.indexOf(n,e.name.value)||e instanceof u.CallExtensionAsync){var i=new u.Symbol(e.lineno,e.colno,t());return s.push(new u.FilterAsync(e.lineno,e.colno,e.name,e.args,i)),i}});return i?e[i]=o:e=o,s.length?(s.push(e),new u.NodeList(e.lineno,e.colno,s)):e}function o(e,t){return r(e,function(e){return e instanceof u.Output?s(e,t):e instanceof u.For?s(e,t,"arr"):e instanceof u.If?s(e,t,"cond"):e instanceof u.CallExtension?s(e,t,"args"):void 0})}function a(e){return i(e,function(e){if(e instanceof u.Block){var n=!1,r=t();e.body=i(e.body,function(e){return e instanceof u.FunCall&&"super"===e.name.value?(n=!0,new u.Symbol(e.lineno,e.colno,r)):void 0}),n&&e.body.children.unshift(new u.Super(0,0,e.name,new u.Symbol(0,0,r)))}})}function l(e){return r(e,function(e){if(e instanceof u.If||e instanceof u.For){var t=!1;if(i(e,function(e){return e instanceof u.FilterAsync||e instanceof u.IfAsync||e instanceof u.AsyncEach||e instanceof u.AsyncAll||e instanceof u.CallExtensionAsync?(t=!0,e):void 0}),t){if(e instanceof u.If)return new u.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof u.For)return new u.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}})}function c(e,t){return l(a(o(e,t)))}function h(e,t,n){return c(e,t||[])}var u=e.nodes,p=e.lib,f=0;e.transformer={transform:h}}(),function(){"use strict";function t(e){return function(t,n){this.compile(t.left,n),this.emit(e),this.compile(t.right,n)}}var n=e.lib,i=e.parser,r=e.transformer,s=e.nodes,o=e.object,a=e.runtime.Frame,l={"==":"==","!=":"!=","<":"<",">":">","<=":"<=",">=":">="},c=o.extend({init:function(e){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.isChild=!1,this.scopeClosers=""},fail:function(e,t,i){throw void 0!==t&&(t+=1),void 0!==i&&(i+=1),new n.TemplateError(e,t,i)},pushBufferId:function(e){this.bufferStack.push(this.buffer),this.buffer=e,this.emit("var "+this.buffer+' = "";')},popBufferId:function(){this.buffer=this.bufferStack.pop()},emit:function(e){this.codebuf.push(e)},emitLine:function(e){this.emit(e+"\n")},emitLines:function(){n.each(n.toArray(arguments),function(e){this.emitLine(e)},this)},emitFuncBegin:function(e){this.buffer="output",this.scopeClosers="",this.emitLine("function "+e+"(env, context, frame, runtime, cb) {"),this.emitLine("var lineno = null;"),this.emitLine("var colno = null;"),this.emitLine("var "+this.buffer+' = "";'),this.emitLine("try {")},emitFuncEnd:function(e){e||this.emitLine("cb(null, "+this.buffer+");"),this.closeScopeLevels(),this.emitLine("} catch (e) {"),this.emitLine("  cb(runtime.handleError(e, lineno, colno));"),this.emitLine("}"),this.emitLine("}"),this.buffer=null},addScopeLevel:function(){this.scopeClosers+="})"},closeScopeLevels:function(){this.emitLine(this.scopeClosers+";"),this.scopeClosers=""},withScopedSyntax:function(e){var t=this.scopeClosers;this.scopeClosers="",e.call(this),this.closeScopeLevels(),this.scopeClosers=t},makeCallback:function(e){var t=this.tmpid();return"function("+t+(e?","+e:"")+") {\nif("+t+") { cb("+t+"); return; }"},tmpid:function(){return this.lastId++,"t_"+this.lastId},_templateName:function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},_bufferAppend:function(e){this.emit(this.buffer+" += runtime.suppressValue("),e.call(this),this.emit(", env.opts.autoescape);\n")},_compileChildren:function(e,t){for(var n=e.children,i=0,r=n.length;r>i;i++)this.compile(n[i],t)},_compileAggregate:function(e,t,n,i){n&&this.emit(n);for(var r=0;r<e.children.length;r++)r>0&&this.emit(","),this.compile(e.children[r],t);i&&this.emit(i)},_compileExpression:function(e,t){this.assertType(e,s.Literal,s.Symbol,s.Group,s.Array,s.Dict,s.FunCall,s.Caller,s.Filter,s.LookupVal,s.Compare,s.InlineIf,s.In,s.And,s.Or,s.Not,s.Add,s.Sub,s.Mul,s.Div,s.FloorDiv,s.Mod,s.Pow,s.Neg,s.Pos,s.Compare,s.NodeList),this.compile(e,t)},assertType:function(e){for(var t=n.toArray(arguments).slice(1),i=!1,r=0;r<t.length;r++)e instanceof t[r]&&(i=!0);i||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},compileCallExtension:function(e,t,i){var r=(e.extName,e.args),o=e.contentArgs,a="boolean"==typeof e.autoescape?e.autoescape:!0;if(i||this.emit(this.buffer+" += runtime.suppressValue("),this.emit('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this.emit("context"),(r||o)&&this.emit(","),r&&(r instanceof s.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),n.each(r.children,function(e,n){this._compileExpression(e,t),(n!==r.children.length-1||o.length)&&this.emit(",")},this)),o.length&&n.each(o,function(e,n){if(n>0&&this.emit(","),e){var i=this.tmpid();this.emitLine("function(cb) {"),this.emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}"),this.pushBufferId(i),this.withScopedSyntax(function(){this.compile(e,t),this.emitLine("cb(null, "+i+");")}),this.popBufferId(),this.emitLine("return "+i+";"),this.emitLine("}")}else this.emit("null")},this),i){var l=this.tmpid();this.emitLine(", "+this.makeCallback(l)),this.emitLine(this.buffer+" += runtime.suppressValue("+l+", "+a+" && env.opts.autoescape);"),this.addScopeLevel()}else this.emit(")"),this.emit(", "+a+" && env.opts.autoescape);\n")},compileCallExtensionAsync:function(e,t){this.compileCallExtension(e,t,!0)},compileNodeList:function(e,t){this._compileChildren(e,t)},compileLiteral:function(e,t){if("string"==typeof e.value){var n=e.value.replace(/\\/g,"\\\\");n=n.replace(/"/g,'\\"'),n=n.replace(/\n/g,"\\n"),n=n.replace(/\r/g,"\\r"),n=n.replace(/\t/g,"\\t"),this.emit('"'+n+'"')}else this.emit(e.value.toString())},compileSymbol:function(e,t){var n,i=e.value;this.emit((n=t.lookup(i))?n:'runtime.contextOrFrameLookup(context, frame, "'+i+'")')},compileGroup:function(e,t){this._compileAggregate(e,t,"(",")")},compileArray:function(e,t){this._compileAggregate(e,t,"[","]")},compileDict:function(e,t){this._compileAggregate(e,t,"{","}")},compilePair:function(e,t){var n=e.key,i=e.value;n instanceof s.Symbol?n=new s.Literal(n.lineno,n.colno,n.value):n instanceof s.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,t),this.emit(": "),this._compileExpression(i,t)},compileInlineIf:function(e,t){this.emit("("),this.compile(e.cond,t),this.emit("?"),this.compile(e.body,t),this.emit(":"),null!==e.else_?this.compile(e.else_,t):this.emit('""'),this.emit(")")},compileIn:function(e,t){this.emit("("),this.compile(e.right,t),this.emit(".indexOf("),this.compile(e.left,t),this.emit(") !== -1)")},compileOr:t(" || "),compileAnd:t(" && "),compileAdd:t(" + "),compileSub:t(" - "),compileMul:t(" * "),compileDiv:t(" / "),compileMod:t(" % "),compileNot:function(e,t){this.emit("!"),this.compile(e.target,t)},compileFloorDiv:function(e,t){this.emit("Math.floor("),this.compile(e.left,t),this.emit(" / "),this.compile(e.right,t),this.emit(")")},compilePow:function(e,t){this.emit("Math.pow("),this.compile(e.left,t),this.emit(", "),this.compile(e.right,t),this.emit(")")},compileNeg:function(e,t){this.emit("-"),this.compile(e.target,t)},compilePos:function(e,t){this.emit("+"),this.compile(e.target,t)},compileCompare:function(e,t){this.compile(e.expr,t);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];this.emit(" "+l[i.type]+" "),this.compile(i.expr,t)}},compileLookupVal:function(e,t){this.emit("runtime.memberLookup(("),this._compileExpression(e.target,t),this.emit("),"),this._compileExpression(e.val,t),this.emit(", env.opts.autoescape)")},_getNodeName:function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this._getNodeName(e.name)+")";case"LookupVal":return this._getNodeName(e.target)+'["'+this._getNodeName(e.val)+'"]';case"Literal":return e.value.toString().substr(0,10);default:return"--expression--"}},compileFunCall:function(e,t){this.emit("(lineno = "+e.lineno+", colno = "+e.colno+", "),this.emit("runtime.callWrap("),this._compileExpression(e.name,t),this.emit(', "'+this._getNodeName(e.name).replace(/"/g,'\\"')+'", '),this._compileAggregate(e.args,t,"[","])"),this.emit(")")},compileFilter:function(e,t){var n=e.name;this.assertType(n,s.Symbol),this.emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this.emit(")")},compileFilterAsync:function(e,t){var n=e.name;this.assertType(n,s.Symbol);var i=e.symbol.value;t.set(i,i),this.emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this.emitLine(", "+this.makeCallback(i)),this.addScopeLevel()},compileKeywordArgs:function(e,t){var i=[];n.each(e.children,function(e){i.push(e.key.value)}),this.emit("runtime.makeKeywordArgs("),this.compileDict(e,t),this.emit(")")},compileSet:function(e,t){var i=[];n.each(e.targets,function(e){var n=e.value,r=t.lookup(n);(null===r||void 0===r)&&(r=this.tmpid(),this.emitLine("var "+r+";")),i.push(r)},this),this.emit(i.join(" = ")+" = "),this._compileExpression(e.value,t),this.emitLine(";"),n.each(e.targets,function(e,t){var n=i[t],r=e.value;this.emitLine('frame.set("'+r+'", '+n+", true);"),this.emitLine("if(!frame.parent) {"),this.emitLine('context.setVariable("'+r+'", '+n+");"),"_"!==r.charAt(0)&&this.emitLine('context.addExport("'+r+'");'),this.emitLine("}")},this)},compileIf:function(e,t,n){this.emit("if("),this._compileExpression(e.cond,t),this.emitLine(") {"),this.withScopedSyntax(function(){this.compile(e.body,t),n&&this.emit("cb()")}),e.else_?(this.emitLine("}\nelse {"),this.withScopedSyntax(function(){this.compile(e.else_,t),n&&this.emit("cb()")})):n&&(this.emitLine("}\nelse {"),this.emit("cb()")),this.emitLine("}")},compileIfAsync:function(e,t){this.emit("(function(cb) {"),this.compileIf(e,t,!0),this.emit("})(function() {"),this.addScopeLevel()},emitLoopBindings:function(e,t,n,i){var r={index:n+" + 1",index0:n,revindex:i+" - "+n,revindex0:i+" - "+n+" - 1",first:n+" === 0",last:n+" === "+i+" - 1",length:i};for(var s in r)this.emitLine('frame.set("loop.'+s+'", '+r[s]+");")},compileFor:function(e,t){var n=this.tmpid(),i=this.tmpid(),r=this.tmpid();if(t=t.push(),this.emitLine("frame = frame.push();"),this.emit("var "+r+" = "),this._compileExpression(e.arr,t),this.emitLine(";"),this.emit("if("+r+") {"),e.name instanceof s.Array){this.emitLine("var "+n+";"),this.emitLine("if(runtime.isArray("+r+")) {"),this.emitLine("var "+i+" = "+r+".length;"),this.emitLine("for("+n+"=0; "+n+" < "+r+".length; "+n+"++) {");for(var o=0;o<e.name.children.length;o++){var a=this.tmpid();this.emitLine("var "+a+" = "+r+"["+n+"]["+o+"]"),this.emitLine('frame.set("'+e.name.children[o].value+'", '+r+"["+n+"]["+o+"]);"),t.set(e.name.children[o].value,a)}this.emitLoopBindings(e,r,n,i),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}"),this.emitLine("} else {");var l=e.name.children[0],c=e.name.children[1],h=this.tmpid(),u=this.tmpid();t.set(l.value,h),t.set(c.value,u),this.emitLine(n+" = -1;"),this.emitLine("var "+i+" = runtime.keys("+r+").length;"),this.emitLine("for(var "+h+" in "+r+") {"),this.emitLine(n+"++;"),this.emitLine("var "+u+" = "+r+"["+h+"];"),this.emitLine('frame.set("'+l.value+'", '+h+");"),this.emitLine('frame.set("'+c.value+'", '+u+");"),this.emitLoopBindings(e,r,n,i),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}"),this.emitLine("}")}else{var u=this.tmpid();t.set(e.name.value,u),this.emitLine("var "+i+" = "+r+".length;"),this.emitLine("for(var "+n+"=0; "+n+" < "+r+".length; "+n+"++) {"),this.emitLine("var "+u+" = "+r+"["+n+"];"),this.emitLine('frame.set("'+e.name.value+'", '+u+");"),this.emitLoopBindings(e,r,n,i),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}")}this.emitLine("}"),e.else_&&(this.emitLine("if (!"+i+") {"),this.compile(e.else_,t),this.emitLine("}")),this.emitLine("frame = frame.pop();")},_compileAsyncLoop:function(e,t,i){var r=this.tmpid(),o=this.tmpid(),a=this.tmpid(),l=i?"asyncAll":"asyncEach";if(t=t.push(),this.emitLine("frame = frame.push();"),this.emit("var "+a+" = "),this._compileExpression(e.arr,t),this.emitLine(";"),e.name instanceof s.Array)this.emit("runtime."+l+"("+a+", "+e.name.children.length+", function("),n.each(e.name.children,function(e){this.emit(e.value+",")},this),this.emit(r+","+o+",next) {"),n.each(e.name.children,function(e){var n=e.value;t.set(n,n),this.emitLine('frame.set("'+n+'", '+n+");")},this);else{var c=e.name.value;this.emitLine("runtime."+l+"("+a+", 1, function("+c+", "+r+", "+o+",next) {"),this.emitLine('frame.set("'+c+'", '+c+");"),t.set(c,c)}this.emitLoopBindings(e,a,r,o),this.withScopedSyntax(function(){var n;i&&(n=this.tmpid(),this.pushBufferId(n)),this.compile(e.body,t),this.emitLine("next("+r+(n?","+n:"")+");"),i&&this.popBufferId()});var h=this.tmpid();this.emitLine("}, "+this.makeCallback(h)),this.addScopeLevel(),i&&this.emitLine(this.buffer+" += "+h+";"),e.else_&&(this.emitLine("if (!"+a+".length) {"),this.compile(e.else_,t),this.emitLine("}")),this.emitLine("frame = frame.pop();")},compileAsyncEach:function(e,t){this._compileAsyncLoop(e,t)},compileAsyncAll:function(e,t){this._compileAsyncLoop(e,t,!0)},_compileMacro:function(e,t){var i=[],r=null,o="macro_"+this.tmpid();n.each(e.args.children,function(t,n){n===e.args.children.length-1&&t instanceof s.Dict?r=t:(this.assertType(t,s.Symbol),i.push(t))},this);var a=n.map(i,function(e){return"l_"+e.value});a.push("kwargs");var l=n.map(i,function(e){return'"'+e.value+'"'}),c=n.map(r&&r.children||[],function(e){return'"'+e.key.value+'"'});t=t.push(),this.emitLines("var "+o+" = runtime.makeMacro(","["+l.join(", ")+"], ","["+c.join(", ")+"], ","function ("+a.join(", ")+") {","frame = frame.push();","kwargs = kwargs || {};",'if (kwargs.hasOwnProperty("caller")) {','frame.set("caller", kwargs.caller); }'),n.each(i,function(e){this.emitLine('frame.set("'+e.value+'", l_'+e.value+");"),t.set(e.value,"l_"+e.value)},this),r&&n.each(r.children,function(e){var n=e.key.value;this.emit('frame.set("'+n+'", kwargs.hasOwnProperty("'+n+'") ? kwargs["'+n+'"] : '),this._compileExpression(e.value,t),this.emitLine(");")},this);var h=this.tmpid();return this.pushBufferId(h),this.withScopedSyntax(function(){this.compile(e.body,t)}),t=t.pop(),this.emitLine("frame = frame.pop();"),this.emitLine("return new runtime.SafeString("+h+");"),this.emitLine("});"),this.popBufferId(),o},compileMacro:function(e,t){var n=this._compileMacro(e,t),i=e.name.value;t.set(i,n),t.parent?this.emitLine('frame.set("'+i+'", '+n+");"):("_"!==e.name.value.charAt(0)&&this.emitLine('context.addExport("'+i+'");'),this.emitLine('context.setVariable("'+i+'", '+n+");"))},compileCaller:function(e,t){this.emit("(function (){");var n=this._compileMacro(e,t);this.emit("return "+n+";})()")},compileImport:function(e,t){var n=this.tmpid(),i=e.target.value;this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", "+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+".getExported("+(e.withContext?"context.getVariables(), frame.push(), ":"")+this.makeCallback(n)),this.addScopeLevel(),t.set(i,n),this.emitLine(t.parent?'frame.set("'+i+'", '+n+");":'context.setVariable("'+i+'", '+n+");")},compileFromImport:function(e,t){var i=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", "+this.makeCallback(i)),this.addScopeLevel(),this.emitLine(i+".getExported("+(e.withContext?"context.getVariables(), frame.push(), ":"")+this.makeCallback(i)),this.addScopeLevel(),n.each(e.names.children,function(e){var n,r,o=this.tmpid();e instanceof s.Pair?(n=e.key.value,r=e.value.value):(n=e.value,r=n),this.emitLine("if("+i+'.hasOwnProperty("'+n+'")) {'),this.emitLine("var "+o+" = "+i+"."+n+";"),this.emitLine("} else {"),this.emitLine("cb(new Error(\"cannot import '"+n+"'\")); return;"),this.emitLine("}"),t.set(r,o),this.emitLine(t.parent?'frame.set("'+r+'", '+o+");":'context.setVariable("'+r+'", '+o+");")},this)},compileBlock:function(e,t){if(!this.isChild){var n=this.tmpid();this.emitLine('context.getBlock("'+e.name.value+'")(env, context, frame, runtime, '+this.makeCallback(n)),this.emitLine(this.buffer+" += "+n+";"),this.addScopeLevel()}},compileSuper:function(e,t){var n=e.blockName.value,i=e.symbol.value;this.emitLine('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+this.makeCallback(i)),this.emitLine(i+" = runtime.markSafe("+i+");"),this.addScopeLevel(),t.set(i,i)},compileExtends:function(e,t){this.isChild&&this.fail("compileExtends: cannot extend multiple times",e.template.lineno,e.template.colno);var n=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", true, "+this._templateName()+", "+this.makeCallback("parentTemplate")),this.emitLine("for(var "+n+" in parentTemplate.blocks) {"),this.emitLine("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this.emitLine("}"),this.addScopeLevel(),this.isChild=!0},compileInclude:function(e,t){var n=this.tmpid(),i=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", "+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+".render(context.getVariables(), frame.push(), "+this.makeCallback(i)),this.emitLine(this.buffer+" += "+i),this.addScopeLevel()},compileTemplateData:function(e,t){this.compileLiteral(e,t)},compileOutput:function(e,t){for(var n=e.children,i=0,r=n.length;r>i;i++)n[i]instanceof s.TemplateData?n[i].value&&(this.emit(this.buffer+" += "),this.compileLiteral(n[i],t),this.emitLine(";")):(this.emit(this.buffer+" += runtime.suppressValue("),this.compile(n[i],t),this.emit(", env.opts.autoescape);\n"))},compileRoot:function(e,t){t&&this.fail("compileRoot: root node can't have frame"),t=new a,this.emitFuncBegin("root"),this._compileChildren(e,t),this.isChild&&this.emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this.emitFuncEnd(this.isChild),this.isChild=!1;for(var n=e.findAll(s.Block),i=0;i<n.length;i++){var r=n[i],o=r.name.value;this.emitFuncBegin("b_"+o);var l=new a;this.compile(r.body,l),this.emitFuncEnd()}this.emitLine("return {");for(var i=0;i<n.length;i++){var r=n[i],o="b_"+r.name.value;this.emitLine(o+": "+o+",")}this.emitLine("root: root\n};")},compile:function(e,t){var n=this["compile"+e.typename];n?n.call(this,e,t):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},getCode:function(){return this.codebuf.join("")}});e.compiler={compile:function(e,t,n,s,o){var a=new c(s);if(n&&n.length)for(var l=0;l<n.length;l++)"preprocess"in n[l]&&(e=n[l].preprocess(e,s));return a.compile(r.transform(i.parse(e,n,o),t,s)),a.getCode()},Compiler:c}}(),function(){"use strict";var t=e.lib,n=e.runtime,i={abs:function(e){return Math.abs(e)},batch:function(e,t,n){for(var i=[],r=[],s=0;s<e.length;s++)s%t===0&&r.length&&(i.push(r),r=[]),r.push(e[s]);if(r.length){if(n)for(var s=r.length;t>s;s++)r.push(n);i.push(r)}return i},capitalize:function(e){var t=e.toLowerCase();return n.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,i){if(i=i||80,e.length>=i)return e;var r=i-e.length,s=t.repeat(" ",r/2-r%2),o=t.repeat(" ",r/2);return n.copySafeness(e,s+e+o)},"default":function(e,t){return e?e:t},dictsort:function(e,n,i){if(!t.isObject(e))throw new t.TemplateError("dictsort filter: val must be an object");var r=[];for(var s in e)r.push([s,e[s]]);var o;if(void 0===i||"key"===i)o=0;else{if("value"!==i)throw new t.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return r.sort(function(e,i){var r=e[o],s=i[o];return n||(t.isString(r)&&(r=r.toUpperCase()),t.isString(s)&&(s=s.toUpperCase())),r>s?1:r===s?0:-1}),r},escape:function(e){return"string"==typeof e||e instanceof n.SafeString?t.escape(e):e},safe:function(e){return n.markSafe(e)},first:function(e){return e[0]},groupby:function(e,n){return t.groupBy(e,n)},indent:function(e,i,r){i=i||4;for(var s="",o=e.split("\n"),a=t.repeat(" ",i),l=0;l<o.length;l++)s+=0!==l||r?a+o[l]+"\n":o[l]+"\n";return n.copySafeness(e,s)},join:function(e,n,i){return n=n||"",i&&(e=t.map(e,function(e){return e[i]})),e.join(n)},last:function(e){return e[e.length-1]},length:function(e){return void 0!==e?e.length:0},list:function(e){if(t.isString(e))return e.split("");if(t.isObject(e)){var n=[];if(Object.keys)n=Object.keys(e);else for(var i in e)n.push(i);return t.map(n,function(t){return{key:t,value:e[t]}})}if(t.isArray(e))return e;throw new t.TemplateError("list filter: type not iterable")},lower:function(e){return e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},rejectattr:function(e,t){return e.filter(function(e){return!e[t]})},selectattr:function(e,t){return e.filter(function(e){return!!e[t]})},replace:function(e,t,i,r){if(t instanceof RegExp)return e.replace(t,i);var s=e,o=s,a=1;for(s=s.replace(t,i);o!==s&&!(a>=r);)o=s,s=s.replace(t,i),a++;return n.copySafeness(e,s)},reverse:function(e){var r;return r=t.isString(e)?i.list(e):t.map(e,function(e){return e}),r.reverse(),t.isString(e)?n.copySafeness(e,r.join("")):r},round:function(e,t,n){t=t||0;var i,r=Math.pow(10,t);return i="ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round,i(e*r)/r},slice:function(e,t,n){for(var i=Math.floor(e.length/t),r=e.length%t,s=0,o=[],a=0;t>a;a++){var l=s+a*i;r>a&&s++;var c=s+(a+1)*i,h=e.slice(l,c);n&&a>=r&&h.push(n),o.push(h)}return o},sort:function(e,n,i,r){return e=t.map(e,function(e){return e}),e.sort(function(e,s){var o,a;return r?(o=e[r],a=s[r]):(o=e,a=s),!i&&t.isString(o)&&t.isString(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),a>o?n?1:-1:o>a?n?-1:1:0}),e},string:function(e){return n.copySafeness(e,e)},title:function(e){for(var t=e.split(" "),r=0;r<t.length;r++)t[r]=i.capitalize(t[r]);return n.copySafeness(e,t.join(" "))},trim:function(e){return n.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,i,r){var s=e;if(t=t||255,e.length<=t)return e;if(i)e=e.substring(0,t);else{var o=e.lastIndexOf(" ",t);-1===o&&(o=t),e=e.substring(0,o)}return e+=void 0!==r&&null!==r?r:"...",n.copySafeness(s,e)},upper:function(e){return e.toUpperCase()},urlencode:function(e){var n=encodeURIComponent;if(t.isString(e))return n(e);var i;if(t.isArray(e))i=e.map(function(e){return n(e[0])+"="+n(e[1])});else{i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(n(r)+"="+n(e[r]))}return i.join("&")},urlize:function(e,t,n){isNaN(t)&&(t=1/0);var i=n===!0?' rel="nofollow"':"",r=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,s=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=/^https?:\/\/.*$/,a=/^www\./,l=/\.(?:org|net|com)(?:\:|\/|$)/,c=e.split(/\s+/).filter(function(e){return e&&e.length}).map(function(e){var n=e.match(r),c=n&&n[1]||e;return o.test(c)?'<a href="'+c+'"'+i+">"+c.substr(0,t)+"</a>":a.test(c)?'<a href="http://'+c+'"'+i+">"+c.substr(0,t)+"</a>":s.test(c)?'<a href="mailto:'+c+'">'+c+"</a>":l.test(c)?'<a href="http://'+c+'"'+i+">"+c.substr(0,t)+"</a>":e});return c.join(" ")},wordcount:function(e){var t=e?e.match(/\w+/g):null;return t?t.length:null},"float":function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},"int":function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}};i.d=i["default"],i.e=i.escape,e.filters=i}(),function(){"use strict";function t(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current}}}function n(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}var i={range:function(e,t,n){t?n||(n=1):(t=e,e=0,n=1);for(var i=[],r=e;t>r;r+=n)i.push(r);return i},cycler:function(){return t(Array.prototype.slice.call(arguments))},joiner:function(e){return n(e)}};e.globals=i}(),function(){"use strict";var t=e.path,n=e.object,i=e.lib,r=n.extend({on:function(e,t){this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[e]&&i.each(this.listeners[e],function(e){e.apply(null,t)})},resolve:function(e,n){return t.resolve(t.dirname(e),n)},isRelative:function(e){return 0===e.indexOf("./")||0===e.indexOf("../")}});e.loader=r}(),function(){"use strict";var t=e.loader,n=t.extend({init:function(e,t){this.precompiled=window.nunjucksPrecompiled||{},this.baseURL=e||"",this.neverUpdate=t},getSource:function(e){if(this.precompiled[e])return{src:{type:"code",obj:this.precompiled[e]},path:e};var t=this.fetch(this.baseURL+"/"+e);return t?{src:t,path:e,noCache:!this.neverUpdate}:null},fetch:function(e,t){var n,i,r=!0;return window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4!==n.readyState||0!==n.status&&200!==n.status||!r||(r=!1,i=n.responseText)},e+=(-1===e.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,!1),n.send(),i}});e["web-loaders"]={WebLoader:n}}(),function(){e.loaders="undefined"==typeof window||window!==this?e["node-loaders"]:e["web-loaders"]}(),function(){"use strict";var t=e.path,n=e.lib,i=e.object,r=(e.lexer,e.compiler),s=e.filters,o=e.loaders,a=e.runtime,l=e.globals,c=a.Frame,h=i.extend({init:function(e,t){var t=this.opts=t||{};this.opts.dev=!!t.dev,this.opts.autoescape=!!t.autoescape,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=e?n.isArray(e)?e:[e]:o.FileSystemLoader?[new o.FileSystemLoader("views")]:[new o.WebLoader("/views")],this.initCache(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var i in s)this.addFilter(i,s[i])},initCache:function(){n.each(this.loaders,function(e){e.cache={},"function"==typeof e.on&&e.on("update",function(t){e.cache[t]=null})})},addExtension:function(e,t){t._name=e,this.extensions[e]=t,this.extensionsList.push(t)},getExtension:function(e){return this.extensions[e]},addGlobal:function(e,t){l[e]=t},addFilter:function(e,t,n){var i=t;n&&this.asyncFilters.push(e),this.filters[e]=i},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},resolveTemplate:function(e,t,n){var i=e.isRelative&&t?e.isRelative(n):!1;return i&&e.resolve?e.resolve(t,n):n},getTemplate:function(e,t,i,r){var s=this,o=null;if(e&&e.raw&&(e=e.raw),n.isFunction(i)&&(r=i,i=null,t=t||!1),n.isFunction(t)&&(r=t,t=!1),"string"!=typeof e)throw new Error("template names must be a string: "+e);for(var a=0;a<this.loaders.length;a++){var l=this.resolveTemplate(this.loaders[a],i,e);if(o=this.loaders[a].cache[l])break}if(!o){var c;return n.asyncIter(this.loaders,function(t,n,r,o){function a(e){e?(e.loader=t,o(e)):r()}e=s.resolveTemplate(t,i,e),t.async?t.getSource(e,function(e,t){if(e)throw e;a(t)}):a(t.getSource(e))},function(n){if(n){var i=new p(n.src,this,n.path,t);n.noCache||(n.loader.cache[e]=i),r?r(null,i):c=i}else{var s=new Error("template not found: "+e);

if(!r)throw s;r(s)}}.bind(this)),c}return t&&o.compile(),r?void r(null,o):o},express:function(e){function n(e,n){if(this.name=e,this.path=e,this.defaultEngine=n.defaultEngine,this.ext=t.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}var i=this;n.prototype.render=function(e,t){i.render(this.name,e,t)},e.set("view",n)},render:function(e,t,i){n.isFunction(t)&&(i=t,t=null);var r=null;return this.getTemplate(e,function(e,n){if(e&&i)i(e);else{if(e)throw e;n.render(t,i||function(e,t){if(e)throw e;r=t})}}),r},renderString:function(e,t,i,r){n.isFunction(i)&&(r=i,i={}),i=i||{};var s=new p(e,this,i.path);return s.render(t,r)}}),u=i.extend({init:function(e,t){this.ctx=e,this.blocks={},this.exported=[];for(var n in t)this.addBlock(n,t[n])},lookup:function(e){return e in l&&!(e in this.ctx)?l[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,i,r,s,o){var a=n.indexOf(this.blocks[t]||[],i),l=this.blocks[t][a+1],c=this;if(-1===a||!l)throw new Error('no super block available for "'+t+'"');l(e,c,r,s,o)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}}),p=i.extend({init:function(e,t,i,r){if(this.env=t||new h,n.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj}else{if(!n.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}this.path=i,r?n.withPrettyErrors(this.path,this.env.dev,this._compile.bind(this)):this.compiled=!1},render:function(e,t,i){return"function"==typeof e?(i=e,e={}):"function"==typeof t&&(i=t,t=null),n.withPrettyErrors(this.path,this.env.dev,function(){try{this.compile()}catch(n){if(i)return i(n);throw n}var r=new u(e||{},this.blocks),s=null;return this.rootRenderFunc(this.env,r,t||new c,a,i||function(e,t){if(e)throw e;s=t}),s}.bind(this))},getExported:function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(i){if(n)return n(i);throw i}var r=new u(e||{},this.blocks);this.rootRenderFunc(this.env,r,t||new c,a,function(){n(null,r.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=r.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),n=new Function(t);e=n()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},_getBlocks:function(e){var t={};for(var n in e)"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n]);return t}});e.environment={Environment:h,Template:p}}();var t,n=e.lib,i=e.environment,r=e.compiler,s=e.parser,o=e.lexer,a=e.runtime,l=e.loader,c=e.loaders,h=e.precompile;t={},t.Environment=i.Environment,t.Template=i.Template,t.Loader=l,t.FileSystemLoader=c.FileSystemLoader,t.WebLoader=c.WebLoader,t.compiler=r,t.parser=s,t.lexer=o,t.runtime=a;var u;t.configure=function(e,t){t=t||{},n.isObject(e)&&(t=e,e=null);var r="watch"in t?!t.watch:!1,s=c.FileSystemLoader||c.WebLoader;return u=new i.Environment(new s(e,r),t),t&&t.express&&u.express(t.express),u},t.compile=function(e,n,i,r){return u||t.configure(),new t.Template(e,n,i,r)},t.render=function(e,n,i){return u||t.configure(),u.render(e,n,i)},t.renderString=function(e,n,i){return u||t.configure(),u.renderString(e,n,i)},h&&(t.precompile=h.precompile,t.precompileString=h.precompileString),t.require=function(t){return e[t]},"function"==typeof define&&define.amd?define(function(){return t}):(window.nunjucks=t,"undefined"!=typeof module&&(module.exports=t))}(),!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.Chartist=t()}):"object"==typeof exports?module.exports=t():e.Chartist=t()}(this,function(){var e={version:"0.8.3"};return function(e,t,n){"use strict";n.noop=function(e){return e},n.alphaNumerate=function(e){return String.fromCharCode(97+e%26)},n.extend=function(e){e=e||{};var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){for(var i in t)e[i]="object"!=typeof t[i]||null===t[i]||t[i]instanceof Array?t[i]:n.extend({},e[i],t[i])}),e},n.replaceAll=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},n.stripUnit=function(e){return"string"==typeof e&&(e=e.replace(/[^0-9\+-\.]/g,"")),+e},n.ensureUnit=function(e,t){return"number"==typeof e&&(e+=t),e},n.querySelector=function(e){return e instanceof Node?e:t.querySelector(e)},n.times=function(e){return Array.apply(null,new Array(e))},n.sum=function(e,t){return e+(t?t:0)},n.mapMultiply=function(e){return function(t){return t*e}},n.mapAdd=function(e){return function(t){return t+e}},n.serialMap=function(e,t){var i=[],r=Math.max.apply(null,e.map(function(e){return e.length}));return n.times(r).forEach(function(n,r){var s=e.map(function(e){return e[r]});i[r]=t.apply(null,s)}),i},n.roundWithPrecision=function(e,t){var i=Math.pow(10,t||n.precision);return Math.round(e*i)/i},n.precision=8,n.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},n.serialize=function(e){return null===e||void 0===e?e:("number"==typeof e?e=""+e:"object"==typeof e&&(e=JSON.stringify({data:e})),Object.keys(n.escapingMap).reduce(function(e,t){return n.replaceAll(e,t,n.escapingMap[t])},e))},n.deserialize=function(e){if("string"!=typeof e)return e;e=Object.keys(n.escapingMap).reduce(function(e,t){return n.replaceAll(e,n.escapingMap[t],t)},e);try{e=JSON.parse(e),e=void 0!==e.data?e.data:e}catch(t){}return e},n.createSvg=function(e,t,i,r){var s;return t=t||"100%",i=i||"100%",Array.prototype.slice.call(e.querySelectorAll("svg")).filter(function(e){return e.getAttribute(n.xmlNs.qualifiedName)}).forEach(function(t){e.removeChild(t)}),s=new n.Svg("svg").attr({width:t,height:i}).addClass(r).attr({style:"width: "+t+"; height: "+i+";"}),e.appendChild(s._node),s},n.reverseData=function(e){e.labels.reverse(),e.series.reverse();for(var t=0;t<e.series.length;t++)"object"==typeof e.series[t]&&void 0!==e.series[t].data?e.series[t].data.reverse():e.series[t]instanceof Array&&e.series[t].reverse()},n.getDataArray=function(e,t){function i(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?void 0:(e.data||e)instanceof Array?(e.data||e).map(i):e.hasOwnProperty("value")?i(e.value):+e}return(t&&!e.reversed||!t&&e.reversed)&&(n.reverseData(e),e.reversed=!e.reversed),e.series.map(i)},n.normalizePadding=function(e,t){return t=t||0,"number"==typeof e?{top:e,right:e,bottom:e,left:e}:{top:"number"==typeof e.top?e.top:t,right:"number"==typeof e.right?e.right:t,bottom:"number"==typeof e.bottom?e.bottom:t,left:"number"==typeof e.left?e.left:t}},n.normalizeDataArray=function(e,t){for(var n=0;n<e.length;n++)if(e[n].length!==t)for(var i=e[n].length;t>i;i++)e[n][i]=void 0;return e},n.getMetaData=function(e,t){var i=e.data?e.data[t]:e[t];return i?n.serialize(i.meta):void 0},n.orderOfMagnitude=function(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)},n.projectLength=function(e,t,n){return t/n.range*e},n.getAvailableHeight=function(e,t){return Math.max((n.stripUnit(t.height)||e.height())-(t.chartPadding.top+t.chartPadding.bottom)-t.axisX.offset,0)},n.getHighLow=function(e,t){function n(e){if(e instanceof Array)for(var t=0;t<e.length;t++)n(e[t]);else r&&e>i.high&&(i.high=e),s&&e<i.low&&(i.low=e)}var i={high:void 0===t.high?-Number.MAX_VALUE:+t.high,low:void 0===t.low?Number.MAX_VALUE:+t.low},r=void 0===t.high,s=void 0===t.low;return n(e),i.high<=i.low&&(0===i.low?i.high=1:i.low<0?i.high=0:i.low=0),i},n.rho=function(e){function t(e,n){return e%n===0?n:t(n,e%n)}function n(e){return e*e+1}if(1===e)return e;var i,r=2,s=2;if(e%2===0)return 2;do r=n(r)%e,s=n(n(s))%e,i=t(Math.abs(r-s),e);while(1===i);return i},n.getBounds=function(e,t,i,r,s){var o,a,l,c={high:t.high,low:t.low};(r||0===r)&&(c.high=Math.max(r,c.high),c.low=Math.min(r,c.low)),c.valueRange=c.high-c.low,c.oom=n.orderOfMagnitude(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);var h=n.projectLength(e,c.step,c),u=i>h,p=s?n.rho(c.range):0;if(s&&n.projectLength(e,1,c)>=i)c.step=1;else if(s&&p<c.step&&n.projectLength(e,p,c)>=i)c.step=p;else for(;;)if(u&&n.projectLength(e,c.step,c)<=i)c.step*=2;else{if(u||!(n.projectLength(e,c.step/2,c)>=i))break;if(c.step/=2,s&&c.step%1!==0){c.step*=2;break}}for(a=c.min,l=c.max;a+c.step<=c.low;)a+=c.step;for(;l-c.step>=c.high;)l-=c.step;for(c.min=a,c.max=l,c.range=c.max-c.min,c.values=[],o=c.min;o<=c.max;o+=c.step)c.values.push(n.roundWithPrecision(o));return c},n.polarToCartesian=function(e,t,n,i){var r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}},n.createChartRect=function(e,t,i){var r=!(!t.axisX&&!t.axisY),s=r?t.axisY.offset:0,o=r?t.axisX.offset:0,a=e.width()||n.stripUnit(t.width)||0,l=e.height()||n.stripUnit(t.height)||0,c=n.normalizePadding(t.chartPadding,i);a=Math.max(a,o+c.left+c.right),l=Math.max(l,s+c.top+c.bottom);var h={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return r?("start"===t.axisX.position?(h.y2=c.top+o,h.y1=Math.max(l-c.bottom,h.y2+1)):(h.y2=c.top,h.y1=Math.max(l-c.bottom-o,h.y2+1)),"start"===t.axisY.position?(h.x1=c.left+s,h.x2=Math.max(a-c.right,h.x1+1)):(h.x1=c.left,h.x2=Math.max(a-c.right-s,h.x1+1))):(h.x1=c.left,h.x2=Math.max(a-c.right,h.x1+1),h.y2=c.top,h.y1=Math.max(l-c.bottom,h.y2+1)),h},n.createGrid=function(e,t,i,r,s,o,a,l){var c={};c[i.units.pos+"1"]=e.pos,c[i.units.pos+"2"]=e.pos,c[i.counterUnits.pos+"1"]=r,c[i.counterUnits.pos+"2"]=r+s;var h=o.elem("line",c,a.join(" "));l.emit("draw",n.extend({type:"grid",axis:i,index:t,group:o,element:h},c))},n.createLabel=function(e,t,i,r,s,o,a,l,c,h){var u,p={};if(p[r.units.pos]=e.pos+o[r.units.pos],p[r.counterUnits.pos]=o[r.counterUnits.pos],p[r.units.len]=e.len,p[r.counterUnits.len]=s-10,c){var f='<span class="'+l.join(" ")+'" style="'+r.units.len+": "+Math.round(p[r.units.len])+"px; "+r.counterUnits.len+": "+Math.round(p[r.counterUnits.len])+'px">'+i[t]+"</span>";u=a.foreignObject(f,n.extend({style:"overflow: visible;"},p))}else u=a.elem("text",p,l.join(" ")).text(i[t]);h.emit("draw",n.extend({type:"label",axis:r,index:t,group:a,element:u,text:i[t]},p))},n.createAxis=function(e,t,i,r,s,o,a,l){var c=a["axis"+e.units.pos.toUpperCase()],h=t.map(e.projectValue.bind(e)),u=t.map(c.labelInterpolationFnc);h.forEach(function(t,h){var p={x:0,y:0};(u[h]||0===u[h])&&("x"===e.units.pos?(t.pos=i.x1+t.pos,p.x=a.axisX.labelOffset.x,p.y="start"===a.axisX.position?i.padding.top+a.axisX.labelOffset.y+(o?5:20):i.y1+a.axisX.labelOffset.y+(o?5:20)):(t.pos=i.y1-t.pos,p.y=a.axisY.labelOffset.y-(o?t.len:0),p.x="start"===a.axisY.position?o?i.padding.left+a.axisY.labelOffset.x:i.x1-10:i.x2+a.axisY.labelOffset.x+10),c.showGrid&&n.createGrid(t,h,e,e.gridOffset,i[e.counterUnits.len](),r,[a.classNames.grid,a.classNames[e.units.dir]],l),c.showLabel&&n.createLabel(t,h,u,e,c.offset,p,s,[a.classNames.label,a.classNames[e.units.dir],a.classNames[c.position]],o,l))})},n.getSeriesOption=function(e,t,n){if(e.name&&t.series&&t.series[e.name]){var i=t.series[e.name];return i.hasOwnProperty(n)?i[n]:t[n]}return t[n]},n.optionsProvider=function(t,i,r){function s(t){var s=a;if(a=n.extend({},c),i)for(l=0;l<i.length;l++){var o=e.matchMedia(i[l][0]);o.matches&&(a=n.extend(a,i[l][1]))}r&&!t&&r.emit("optionsChanged",{previousOptions:s,currentOptions:a})}function o(){h.forEach(function(e){e.removeListener(s)})}var a,l,c=n.extend({},t),h=[];if(!e.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(l=0;l<i.length;l++){var u=e.matchMedia(i[l][0]);u.addListener(s),h.push(u)}return s(!0),{removeMediaQueryListeners:o,getCurrentOptions:function(){return n.extend({},a)}}}}(window,document,e),function(e,t,n){"use strict";n.Interpolation={},n.Interpolation.none=function(){return function(e,t){for(var i=new n.Svg.Path,r=!0,s=1;s<e.length;s+=2){var o=t[(s-1)/2];void 0===o.value?r=!0:r?(i.move(e[s-1],e[s],!1,o),r=!1):i.line(e[s-1],e[s],!1,o)}return i}},n.Interpolation.simple=function(e){var t={divisor:2};e=n.extend({},t,e);var i=1/Math.max(1,e.divisor);return function(e,t){for(var r=new n.Svg.Path,s=!0,o=2;o<e.length;o+=2){var a=e[o-2],l=e[o-1],c=e[o],h=e[o+1],u=(c-a)*i,p=t[o/2-1],f=t[o/2];void 0===p.value?s=!0:(s&&r.move(a,l,!1,p),void 0!==f.value&&(r.curve(a+u,l,c-u,h,c,h,!1,f),s=!1))}return r}},n.Interpolation.cardinal=function(e){function t(e,t){for(var n=[],i=!0,r=0;r<e.length;r+=2)void 0===t[r/2].value?i=!0:(i&&(n.push({pathCoordinates:[],valueData:[]}),i=!1),n[n.length-1].pathCoordinates.push(e[r],e[r+1]),n[n.length-1].valueData.push(t[r/2]));return n}var i={tension:1};e=n.extend({},i,e);var r=Math.min(1,Math.max(0,e.tension)),s=1-r;return function o(e,i){var a=t(e,i);if(a.length>1){var l=[];return a.forEach(function(e){l.push(o(e.pathCoordinates,e.valueData))}),n.Svg.Path.join(l)}if(e=a[0].pathCoordinates,i=a[0].valueData,e.length<=4)return n.Interpolation.none()(e,i);for(var c,h=(new n.Svg.Path).move(e[0],e[1],!1,i[0]),u=0,p=e.length;p-2*!c>u;u+=2){var f=[{x:+e[u-2],y:+e[u-1]},{x:+e[u],y:+e[u+1]},{x:+e[u+2],y:+e[u+3]},{x:+e[u+4],y:+e[u+5]}];c?u?p-4===u?f[3]={x:+e[0],y:+e[1]}:p-2===u&&(f[2]={x:+e[0],y:+e[1]},f[3]={x:+e[2],y:+e[3]}):f[0]={x:+e[p-2],y:+e[p-1]}:p-4===u?f[3]=f[2]:u||(f[0]={x:+e[u],y:+e[u+1]}),h.curve(r*(-f[0].x+6*f[1].x+f[2].x)/6+s*f[2].x,r*(-f[0].y+6*f[1].y+f[2].y)/6+s*f[2].y,r*(f[1].x+6*f[2].x-f[3].x)/6+s*f[2].x,r*(f[1].y+6*f[2].y-f[3].y)/6+s*f[2].y,f[2].x,f[2].y,!1,i[(u+2)/2])}return h}},n.Interpolation.step=function(e){var t={postpone:!0};return e=n.extend({},t,e),function(t,i){for(var r=new n.Svg.Path,s=!0,o=2;o<t.length;o+=2){var a=t[o-2],l=t[o-1],c=t[o],h=t[o+1],u=i[o/2-1],p=i[o/2];void 0===u.value?s=!0:(s&&r.move(a,l,!1,u),void 0!==p.value&&(e.postpone?r.line(c,l,!1,u):r.line(a,h,!1,p),r.line(c,h,!1,p),s=!1))}return r}}}(window,document,e),function(e,t,n){"use strict";n.EventEmitter=function(){function e(e,t){i[e]=i[e]||[],i[e].push(t)}function t(e,t){i[e]&&(t?(i[e].splice(i[e].indexOf(t),1),0===i[e].length&&delete i[e]):delete i[e])}function n(e,t){i[e]&&i[e].forEach(function(e){e(t)}),i["*"]&&i["*"].forEach(function(n){n(e,t)})}var i=[];return{addEventHandler:e,removeEventHandler:t,emit:n}}}(window,document,e),function(e,t,n){"use strict";function i(e){var t=[];if(e.length)for(var n=0;n<e.length;n++)t.push(e[n]);return t}function r(e,t){var i=t||this.prototype||n.Class,r=Object.create(i);n.Class.cloneDefinitions(r,e);var s=function(){var e,t=r.constructor||function(){};return e=this===n?Object.create(r):this,t.apply(e,Array.prototype.slice.call(arguments,0)),e};return s.prototype=r,s["super"]=i,s.extend=this.extend,s}function s(){var e=i(arguments),t=e[0];return e.splice(1,e.length-1).forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(n){delete t[n],Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}),t}n.Class={extend:r,cloneDefinitions:s}}(window,document,e),function(e,t,n){"use strict";function i(e,t,i){return e&&(this.data=e,this.eventEmitter.emit("data",{type:"update",data:this.data})),t&&(this.options=n.extend({},i?this.options:this.defaultOptions,t),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function r(){return this.initializeTimeoutId?e.clearTimeout(this.initializeTimeoutId):(e.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function s(e,t){return this.eventEmitter.addEventHandler(e,t),this}function o(e,t){return this.eventEmitter.removeEventHandler(e,t),this}function a(){e.addEventListener("resize",this.resizeListener),this.optionsProvider=n.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(e){e instanceof Array?e[0](this,e[1]):e(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function l(e,t,i,r,s){this.container=n.querySelector(e),this.data=t,this.defaultOptions=i,this.options=r,this.responsiveOptions=s,this.eventEmitter=n.EventEmitter(),this.supportsForeignObject=n.Svg.isSupported("Extensibility"),this.supportsAnimations=n.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(a.bind(this),0)}n.Base=n.Class.extend({constructor:l,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:i,detach:r,on:s,off:o,version:n.version,supportsForeignObject:!1})}(window,document,e),function(e,t,n){"use strict";function i(e,i,r,s,o){e instanceof Element?this._node=e:(this._node=t.createElementNS(T,e),"svg"===e&&this._node.setAttributeNS(_,n.xmlNs.qualifiedName,n.xmlNs.uri),i&&this.attr(i),r&&this.addClass(r),s&&(o&&s._node.firstChild?s._node.insertBefore(this._node,s._node.firstChild):s._node.appendChild(this._node)))}function r(e,t){return"string"==typeof e?t?this._node.getAttributeNS(t,e):this._node.getAttribute(e):(Object.keys(e).forEach(function(i){void 0!==e[i]&&(t?this._node.setAttributeNS(t,[n.xmlNs.prefix,":",i].join(""),e[i]):this._node.setAttribute(i,e[i]))}.bind(this)),this)}function s(e,t,i,r){return new n.Svg(e,t,i,this,r)}function o(){return this._node.parentNode instanceof SVGElement?new n.Svg(this._node.parentNode):null}function a(){for(var e=this._node;"svg"!==e.nodeName;)e=e.parentNode;return new n.Svg(e)}function l(e){var t=this._node.querySelector(e);return t?new n.Svg(t):null}function c(e){var t=this._node.querySelectorAll(e);return t.length?new n.Svg.List(t):null}function h(e,n,i,r){if("string"==typeof e){var s=t.createElement("div");s.innerHTML=e,e=s.firstChild}e.setAttribute("xmlns",O);var o=this.elem("foreignObject",n,i,r);return o._node.appendChild(e),o}function u(e){return this._node.appendChild(t.createTextNode(e)),this}function p(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function f(){return this._node.parentNode.removeChild(this._node),this.parent()}function d(e){return this._node.parentNode.replaceChild(e._node,this._node),e}function m(e,t){return t&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}function v(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function g(e){return this._node.setAttribute("class",this.classes(this._node).concat(e.trim().split(/\s+/)).filter(function(e,t,n){return n.indexOf(e)===t}).join(" ")),this}function y(e){var t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(e){return-1===t.indexOf(e)}).join(" ")),this}function x(){return this._node.setAttribute("class",""),this}function b(e,t){try{return e.getBBox()[t]}catch(n){}return 0}function w(){return this._node.clientHeight||Math.round(b(this._node,"height"))||this._node.parentNode.clientHeight}function E(){return this._node.clientWidth||Math.round(b(this._node,"width"))||this._node.parentNode.clientWidth}function k(e,t,i){return void 0===t&&(t=!0),Object.keys(e).forEach(function(r){function s(e,t){var s,o,a,l={};e.easing&&(a=e.easing instanceof Array?e.easing:n.Svg.Easing[e.easing],delete e.easing),e.begin=n.ensureUnit(e.begin,"ms"),e.dur=n.ensureUnit(e.dur,"ms"),a&&(e.calcMode="spline",e.keySplines=a.join(" "),e.keyTimes="0;1"),t&&(e.fill="freeze",l[r]=e.from,this.attr(l),o=n.stripUnit(e.begin||0),e.begin="indefinite"),s=this.elem("animate",n.extend({attributeName:r},e)),t&&setTimeout(function(){try{s._node.beginElement()}catch(t){l[r]=e.to,this.attr(l),s.remove()}}.bind(this),o),i&&s._node.addEventListener("beginEvent",function(){i.emit("animationBegin",{element:this,animate:s._node,params:e})}.bind(this)),s._node.addEventListener("endEvent",function(){i&&i.emit("animationEnd",{element:this,animate:s._node,params:e}),t&&(l[r]=e.to,this.attr(l),s.remove())}.bind(this))}e[r]instanceof Array?e[r].forEach(function(e){s.bind(this)(e,!1)}.bind(this)):s.bind(this)(e[r],t)}.bind(this)),this}function A(e){var t=this;this.svgElements=[];for(var i=0;i<e.length;i++)this.svgElements.push(new n.Svg(e[i]));Object.keys(n.Svg.prototype).filter(function(e){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(e)}).forEach(function(e){t[e]=function(){var i=Array.prototype.slice.call(arguments,0);return t.svgElements.forEach(function(t){n.Svg.prototype[e].apply(t,i)}),t}})}var T="http://www.w3.org/2000/svg",_="http://www.w3.org/2000/xmlns/",O="http://www.w3.org/1999/xhtml";n.xmlNs={qualifiedName:"xmlns:ct",prefix:"ct",uri:"http://gionkunz.github.com/chartist-js/ct"},n.Svg=n.Class.extend({constructor:i,attr:r,elem:s,parent:o,root:a,querySelector:l,querySelectorAll:c,foreignObject:h,text:u,empty:p,remove:f,replace:d,append:m,classes:v,addClass:g,removeClass:y,removeAllClasses:x,height:w,width:E,animate:k}),n.Svg.isSupported=function(e){return t.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#"+e,"1.1")};var L={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};n.Svg.Easing=L,n.Svg.List=n.Class.extend({constructor:A})}(window,document,e),function(e,t,n){"use strict";function i(e,t,i,r,s,o){var a=n.extend({command:s?e.toLowerCase():e.toUpperCase()},t,o?{data:o}:{});i.splice(r,0,a)}function r(e,t){e.forEach(function(n,i){b[n.command.toLowerCase()].forEach(function(r,s){t(n,r,i,s,e)})})}function s(e,t){this.pathElements=[],this.pos=0,this.close=e,this.options=n.extend({},w,t)}function o(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}function a(e){return this.pathElements.splice(this.pos,e),this}function l(e,t,n,r){return i("M",{x:+e,y:+t},this.pathElements,this.pos++,n,r),this}function c(e,t,n,r){return i("L",{x:+e,y:+t},this.pathElements,this.pos++,n,r),this}function h(e,t,n,r,s,o,a,l){return i("C",{x1:+e,y1:+t,x2:+n,y2:+r,x:+s,y:+o},this.pathElements,this.pos++,a,l),this}function u(e,t,n,r,s,o,a,l,c){return i("A",{rx:+e,ry:+t,xAr:+n,lAf:+r,sf:+s,x:+o,y:+a},this.pathElements,this.pos++,l,c),this}function p(e){var t=e.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(e,t){return t.match(/[A-Za-z]/)&&e.push([]),e[e.length-1].push(t),e},[]);"Z"===t[t.length-1][0].toUpperCase()&&t.pop();var i=t.map(function(e){var t=e.shift(),i=b[t.toLowerCase()];return n.extend({command:t},i.reduce(function(t,n,i){return t[n]=+e[i],t},{}))}),r=[this.pos,0];return Array.prototype.push.apply(r,i),Array.prototype.splice.apply(this.pathElements,r),this.pos+=i.length,this}function f(){var e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(t,n){var i=b[n.command.toLowerCase()].map(function(t){return this.options.accuracy?Math.round(n[t]*e)/e:n[t]}.bind(this));return t+n.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")}function d(e,t){return r(this.pathElements,function(n,i){n[i]*="x"===i[0]?e:t}),this}function m(e,t){return r(this.pathElements,function(n,i){n[i]+="x"===i[0]?e:t}),this}function v(e){return r(this.pathElements,function(t,n,i,r,s){var o=e(t,n,i,r,s);(o||0===o)&&(t[n]=o)}),this}function g(e){var t=new n.Svg.Path(e||this.close);return t.pos=this.pos,t.pathElements=this.pathElements.slice().map(function(e){return n.extend({},e)}),t.options=n.extend({},this.options),t}function y(e){var t=[new n.Svg.Path];return this.pathElements.forEach(function(i){i.command===e.toUpperCase()&&0!==t[t.length-1].pathElements.length&&t.push(new n.Svg.Path),t[t.length-1].pathElements.push(i)}),t}function x(e,t,i){for(var r=new n.Svg.Path(t,i),s=0;s<e.length;s++)for(var o=e[s],a=0;a<o.pathElements.length;a++)r.pathElements.push(o.pathElements[a]);return r}var b={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},w={accuracy:3};n.Svg.Path=n.Class.extend({constructor:s,position:o,remove:a,move:l,line:c,curve:h,arc:u,scale:d,translate:m,transform:v,parse:p,stringify:f,clone:g,splitByCommand:y}),n.Svg.Path.elementDescriptions=b,n.Svg.Path.join=x}(window,document,e),function(e,t,n){"use strict";function i(e,t,n){this.units=e,this.counterUnits=e===r.x?r.y:r.x,this.chartRect=t,this.axisLength=t[e.rectEnd]-t[e.rectStart],this.gridOffset=t[e.rectOffset],this.options=n}var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};n.Axis=n.Class.extend({constructor:i,projectValue:function(e,t,n){throw new Error("Base axis can't be instantiated!")}}),n.Axis.units=r}(window,document,e),function(e,t,n){"use strict";function i(e,t,i){n.LinearScaleAxis["super"].constructor.call(this,e,t,i),this.bounds=n.getBounds(this.axisLength,i.highLow,i.scaleMinSpace,i.referenceValue,i.onlyInteger)}function r(e){return{pos:this.axisLength*(e-this.bounds.min)/this.bounds.range,len:n.projectLength(this.axisLength,this.bounds.step,this.bounds)}}n.LinearScaleAxis=n.Axis.extend({constructor:i,projectValue:r})}(window,document,e),function(e,t,n){"use strict";function i(e,t,i){n.StepAxis["super"].constructor.call(this,e,t,i),this.stepLength=this.axisLength/(i.stepCount-(i.stretch?1:0))}function r(e,t){return{pos:this.stepLength*t,len:this.stepLength}}n.StepAxis=n.Axis.extend({constructor:i,projectValue:r})}(window,document,e),function(e,t,n){"use strict";function i(e){var t=[],i=n.normalizeDataArray(n.getDataArray(this.data,e.reverseData),this.data.labels.length);this.svg=n.createSvg(this.container,e.width,e.height,e.classNames.chart);var r=n.createChartRect(this.svg,e,s.padding),o=n.getHighLow(i,e),a=new n.StepAxis(n.Axis.units.x,r,{stepCount:this.data.labels.length,stretch:e.fullWidth}),l=new n.LinearScaleAxis(n.Axis.units.y,r,{highLow:o,scaleMinSpace:e.axisY.scaleMinSpace,onlyInteger:e.axisY.onlyInteger}),c=this.svg.elem("g").addClass(e.classNames.labelGroup),h=this.svg.elem("g").addClass(e.classNames.gridGroup);n.createAxis(a,this.data.labels,r,h,c,this.supportsForeignObject,e,this.eventEmitter),n.createAxis(l,l.bounds.values,r,h,c,this.supportsForeignObject,e,this.eventEmitter),this.data.series.forEach(function(s,o){t[o]=this.svg.elem("g"),t[o].attr({"series-name":s.name,meta:n.serialize(s.meta)},n.xmlNs.uri),t[o].addClass([e.classNames.series,s.className||e.classNames.series+"-"+n.alphaNumerate(o)].join(" "));var c=[],h=[];i[o].forEach(function(e,t){var u={x:r.x1+a.projectValue(e,t,i[o]).pos,y:r.y1-l.projectValue(e,t,i[o]).pos};c.push(u.x,u.y),h.push({value:e,valueIndex:t,meta:n.getMetaData(s,t)})}.bind(this));var u={lineSmooth:n.getSeriesOption(s,e,"lineSmooth"),showPoint:n.getSeriesOption(s,e,"showPoint"),showLine:n.getSeriesOption(s,e,"showLine"),showArea:n.getSeriesOption(s,e,"showArea")},p="function"==typeof u.lineSmooth?u.lineSmooth:u.lineSmooth?n.Interpolation.cardinal():n.Interpolation.none(),f=p(c,h);if(u.showPoint&&f.pathElements.forEach(function(i){var r=t[o].elem("line",{x1:i.x,y1:i.y,x2:i.x+.01,y2:i.y},e.classNames.point).attr({value:i.data.value,meta:i.data.meta},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"point",value:i.data.value,index:i.data.valueIndex,meta:i.data.meta,series:s,seriesIndex:o,group:t[o],element:r,x:i.x,y:i.y})}.bind(this)),u.showLine){var d=t[o].elem("path",{d:f.stringify()},e.classNames.line,!0).attr({values:i[o]},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"line",values:i[o],path:f.clone(),chartRect:r,index:o,series:s,seriesIndex:o,group:t[o],element:d})}if(u.showArea){var m=Math.max(Math.min(e.areaBase,l.bounds.max),l.bounds.min),v=r.y1-l.projectValue(m).pos;f.splitByCommand("M").filter(function(e){return e.pathElements.length>1}).map(function(e){var t=e.pathElements[0],n=e.pathElements[e.pathElements.length-1];return e.clone(!0).position(0).remove(1).move(t.x,v).line(t.x,t.y).position(e.pathElements.length+1).line(n.x,v)}).forEach(function(a){var l=t[o].elem("path",{d:a.stringify()},e.classNames.area,!0).attr({values:i[o]},n.xmlNs.uri);this.eventEmitter.emit("draw",{type:"area",values:i[o],path:a.clone(),series:s,seriesIndex:o,chartRect:r,index:o,group:t[o],element:l})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:r,axisX:a,axisY:l,svg:this.svg,options:e})}function r(e,t,i,r){n.Line["super"].constructor.call(this,e,t,s,n.extend({},s,i),r)}var s={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Line=n.Base.extend({constructor:r,createChart:i})}(window,document,e),function(e,t,n){"use strict";function i(e){var t,i=[],r=n.getDataArray(this.data,e.reverseData),o=e.distributeSeries?r.map(function(e){return[e]}):n.normalizeDataArray(r,this.data.labels.length);if(this.svg=n.createSvg(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:"")),e.stackBars){var a=n.serialMap(o,function(){return Array.prototype.slice.call(arguments).reduce(n.sum,0)});t=n.getHighLow([a],e)}else t=n.getHighLow(o,e);t.high=+e.high||(0===e.high?0:t.high),t.low=+e.low||(0===e.low?0:t.low);var l,c,h,u,p,f=n.createChartRect(this.svg,e,s.padding);c=e.distributeSeries&&!e.stackBars?o.length:e.distributeSeries&&e.stackBars?1:this.data.labels.length,e.horizontalBars?(h=p=new n.StepAxis(n.Axis.units.y,f,{stepCount:c}),l=u=new n.LinearScaleAxis(n.Axis.units.x,f,{highLow:t,scaleMinSpace:e.axisX.scaleMinSpace,onlyInteger:e.axisX.onlyInteger,referenceValue:0})):(h=u=new n.StepAxis(n.Axis.units.x,f,{stepCount:c}),l=p=new n.LinearScaleAxis(n.Axis.units.y,f,{highLow:t,scaleMinSpace:e.axisY.scaleMinSpace,onlyInteger:e.axisY.onlyInteger,referenceValue:0}));var d=this.svg.elem("g").addClass(e.classNames.labelGroup),m=this.svg.elem("g").addClass(e.classNames.gridGroup),v=e.horizontalBars?f.x1+l.projectValue(0).pos:f.y1-l.projectValue(0).pos,g=[];

n.createAxis(h,this.data.labels,f,m,d,this.supportsForeignObject,e,this.eventEmitter),n.createAxis(l,l.bounds.values,f,m,d,this.supportsForeignObject,e,this.eventEmitter),this.data.series.forEach(function(t,r){var s,a=r-(this.data.series.length-1)/2;s=e.distributeSeries&&!e.stackBars?h.axisLength/o.length/2:e.distributeSeries&&e.stackBars?h.axisLength/2:h.axisLength/o[r].length/2,i[r]=this.svg.elem("g"),i[r].attr({"series-name":t.name,meta:n.serialize(t.meta)},n.xmlNs.uri),i[r].addClass([e.classNames.series,t.className||e.classNames.series+"-"+n.alphaNumerate(r)].join(" ")),o[r].forEach(function(c,u){var p,d,m,y;if(y=e.distributeSeries&&!e.stackBars?r:e.distributeSeries&&e.stackBars?0:u,p=e.horizontalBars?{x:f.x1+l.projectValue(c||0,u,o[r]).pos,y:f.y1-h.projectValue(c||0,y,o[r]).pos}:{x:f.x1+h.projectValue(c||0,y,o[r]).pos,y:f.y1-l.projectValue(c||0,u,o[r]).pos},p[h.units.pos]+=s*(e.horizontalBars?-1:1),p[h.units.pos]+=e.stackBars||e.distributeSeries?0:a*e.seriesBarDistance*(e.horizontalBars?-1:1),m=g[u]||v,g[u]=m-(v-p[h.counterUnits.pos]),void 0!==c){var x={};x[h.units.pos+"1"]=p[h.units.pos],x[h.units.pos+"2"]=p[h.units.pos],x[h.counterUnits.pos+"1"]=e.stackBars?m:v,x[h.counterUnits.pos+"2"]=e.stackBars?g[u]:p[h.counterUnits.pos],d=i[r].elem("line",x,e.classNames.bar).attr({value:c,meta:n.getMetaData(t,u)},n.xmlNs.uri),this.eventEmitter.emit("draw",n.extend({type:"bar",value:c,index:u,meta:n.getMetaData(t,u),series:t,seriesIndex:r,chartRect:f,group:i[r],element:d},x))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:l.bounds,chartRect:f,axisX:u,axisY:p,svg:this.svg,options:e})}function r(e,t,i,r){n.Bar["super"].constructor.call(this,e,t,s,n.extend({},s,i),r)}var s={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:n.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,onlyInteger:!1,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,horizontalBars:!1,distributeSeries:!1,reverseData:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};n.Bar=n.Base.extend({constructor:r,createChart:i})}(window,document,e),function(e,t,n){"use strict";function i(e,t,n){var i=t.x>e.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}function r(e){var t,r,s,a,l=[],c=e.startAngle,h=n.getDataArray(this.data,e.reverseData);this.svg=n.createSvg(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie),t=n.createChartRect(this.svg,e,o.padding),r=Math.min(t.width()/2,t.height()/2),a=e.total||h.reduce(function(e,t){return e+t},0),r-=e.donut?e.donutWidth/2:0,s="outside"===e.labelPosition||e.donut?r:"center"===e.labelPosition?0:r/2,s+=e.labelOffset;for(var u={x:t.x1+t.width()/2,y:t.y2+t.height()/2},p=1===this.data.series.filter(function(e){return e.hasOwnProperty("value")?0!==e.value:0!==e}).length,f=0;f<this.data.series.length;f++){var d=this.data.series[f];l[f]=this.svg.elem("g",null,null,!0),l[f].attr({"series-name":d.name},n.xmlNs.uri),l[f].addClass([e.classNames.series,d.className||e.classNames.series+"-"+n.alphaNumerate(f)].join(" "));var m=c+h[f]/a*360;m-c===360&&(m-=.01);var v=n.polarToCartesian(u.x,u.y,r,c-(0===f||p?0:.2)),g=n.polarToCartesian(u.x,u.y,r,m),y=new n.Svg.Path(!e.donut).move(g.x,g.y).arc(r,r,0,m-c>180,0,v.x,v.y);e.donut||y.line(u.x,u.y);var x=l[f].elem("path",{d:y.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(x.attr({value:h[f],meta:n.serialize(d.meta)},n.xmlNs.uri),e.donut&&x.attr({style:"stroke-width: "+ +e.donutWidth+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:h[f],totalDataSum:a,index:f,meta:d.meta,series:d,group:l[f],element:x,path:y.clone(),center:u,radius:r,startAngle:c,endAngle:m}),e.showLabel){var b=n.polarToCartesian(u.x,u.y,s,c+(m-c)/2),w=e.labelInterpolationFnc(this.data.labels?this.data.labels[f]:h[f],f);if(w||0===w){var E=l[f].elem("text",{dx:b.x,dy:b.y,"text-anchor":i(u,b,e.labelDirection)},e.classNames.label).text(""+w);this.eventEmitter.emit("draw",{type:"label",index:f,group:l[f],element:E,text:""+w,x:b.x,y:b.y})}}c=m}this.eventEmitter.emit("created",{chartRect:t,svg:this.svg,options:e})}function s(e,t,i,r){n.Pie["super"].constructor.call(this,e,t,o,n.extend({},o,i),r)}var o={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:n.noop,labelDirection:"neutral",reverseData:!1};n.Pie=n.Base.extend({constructor:s,createChart:r,determineAnchorPosition:i})}(window,document,e),e}),function(){function e(e,t){var e={labels:e.map(function(e,t){return t+1}),series:[e.map(function(e){return e.response.data.median.firstView?e.response.data.median.firstView[t]:0}),e.map(function(e){return e.response.data.median.repeatView?e.response.data.median.repeatView[t]:0})]},n={seriesBarDistance:10},i=[["screen and (max-width: 640px)",{seriesBarDistance:5,axisX:{labelInterpolationFnc:function(e){return e[0]}}}]];new Chartist.Bar("#resultGraph--"+t,e,n,i)}function t(){fetch("/results/data/"+n).then(function(e){return e.json()}).then(function(n){console.log(n),r.innerHTML=nunjucks.renderString(s.innerHTML,n),e(n.data,"render"),e(n.data,"SpeedIndex"),e(n.data,"domElements"),n.finished?(o.classList.remove("is-processing"),o.classList.add("is-done"),i.innerText="DONE!"):(i.innerText=n.runsToGo?n.runsToGo+" runs to go":"Processing...",setTimeout(t,7500))})}var n=window.location.href.split("/").pop(),i=document.getElementById("loading"),r=document.getElementById("resultTable"),s=document.getElementById("resultsTpl"),o=document.getElementById("status");t()}();